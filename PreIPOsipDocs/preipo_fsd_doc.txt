# Functional Specification Document (FSD)
## PreIPO SIP Platform - Complete Function List

**Version:** 1.0  
**Date:** November 6, 2024  
**Project:** Fully Configurable Pre-IPO Investment Platform  
**Document Owner:** Product & Development Team

---

## DOCUMENT PURPOSE

This FSD lists EVERY function the website must perform, with emphasis on **complete admin configurability**. The system must allow administrators to modify, enable/disable, and configure ANY aspect of the platform without touching code.

**Core Philosophy:** Everything is configurable from admin panel - no hardcoded values.

---

## 1. SYSTEM CONFIGURATION MODULE

### 1.1 Module On/Off Controls

**FSD-SYS-001: User Registration Control**
- Admin must be able to enable/disable user registration globally
- When disabled: "Sign Up" button hidden, registration page shows "Registrations Currently Closed"
- Configuration fields:
  - `registration_enabled` (Yes/No toggle)
  - `registration_closed_message` (Rich text editor)
  - `registration_reopen_date` (Date picker, optional)

**FSD-SYS-002: User Login Control**
- Admin must be able to enable/disable user login
- When disabled: Login page shows maintenance message
- Configuration fields:
  - `login_enabled` (Yes/No toggle)
  - `login_disabled_message` (Rich text editor)
  - `allowed_roles_during_maintenance` (Checkboxes: Admin, Support, Finance)

**FSD-SYS-003: Investment/Payment Module Control**
- Admin must be able to enable/disable new investments
- When disabled: "Invest Now" buttons hidden, payment page shows message
- Configuration fields:
  - `investment_enabled` (Yes/No toggle)
  - `investment_disabled_message` (Rich text)
  - `allow_existing_subscriptions_continue` (Yes/No)

**FSD-SYS-004: Withdrawal Module Control**
- Admin must be able to enable/disable withdrawals
- When disabled: "Withdraw" button hidden
- Configuration fields:
  - `withdrawal_enabled` (Yes/No toggle)
  - `withdrawal_disabled_message` (Rich text)
  - `process_pending_withdrawals` (Yes/No)

**FSD-SYS-005: Referral Module Control**
- Admin must be able to enable/disable referral system
- When disabled: Referral code not required at signup, referral page hidden
- Configuration fields:
  - `referral_enabled` (Yes/No toggle)
  - `referral_code_mandatory` (Yes/No)
  - `referral_bonus_processing` (Yes/No)

**FSD-SYS-006: Lucky Draw Module Control**
- Admin must be able to enable/disable lucky draws
- When disabled: Lucky draw page hidden, entries not generated
- Configuration fields:
  - `lucky_draw_enabled` (Yes/No toggle)
  - `skip_current_month_draw` (Yes/No)
  - `auto_execute_draws` (Yes/No)

**FSD-SYS-007: Profit Sharing Module Control**
- Admin must be able to enable/disable profit sharing
- When disabled: Profit share not calculated
- Configuration fields:
  - `profit_sharing_enabled` (Yes/No toggle)
  - `skip_current_quarter` (Yes/No)
  - `auto_distribute_profits` (Yes/No)

**FSD-SYS-008: KYC Module Control**
- Admin must be able to make KYC optional/mandatory
- Configuration fields:
  - `kyc_required_for_investment` (Yes/No toggle)
  - `kyc_documents_required` (Checkboxes: Aadhaar, PAN, Demat, Bank)
  - `auto_verify_enabled` (Yes/No)
  - `manual_approval_required` (Yes/No)

**FSD-SYS-009: Support Ticket Module Control**
- Admin must be able to enable/disable support tickets
- Configuration fields:
  - `support_tickets_enabled` (Yes/No toggle)
  - `live_chat_enabled` (Yes/No)
  - `ticket_creation_limit_per_day` (Number, 0 = unlimited)

**FSD-SYS-010: Bonus Module Control**
- Admin must be able to enable/disable each bonus type individually
- Configuration fields:
  - `progressive_bonus_enabled` (Yes/No)
  - `milestone_bonus_enabled` (Yes/No)
  - `consistency_bonus_enabled` (Yes/No)
  - `referral_bonus_enabled` (Yes/No)
  - `profit_share_enabled` (Yes/No)
  - `celebration_bonus_enabled` (Yes/No)
  - `lucky_draw_bonus_enabled` (Yes/No)

---

## 2. INVESTMENT PLAN MANAGEMENT

### 2.1 Plan CRUD Operations

**FSD-PLAN-001: Create New Plan**
- Admin must be able to create unlimited number of plans (A, B, C, D, E, F, etc.)
- Required fields:
  - `plan_name` (text, e.g., "Plan E - Super Elite")
  - `plan_slug` (auto-generated, editable)
  - `plan_code` (unique identifier, e.g., "PLAN_E")
  - `monthly_amount` (number, e.g., 50000)
  - `duration_months` (number, default 36)
  - `is_active` (Yes/No toggle)
  - `display_order` (number, for sorting)
  - `is_featured` (Yes/No, shows badge)
  - `available_from` (date, when to show plan)
  - `available_until` (date, optional, when to hide)
  - `max_subscribers` (number, 0 = unlimited)
  - `plan_description` (Rich text editor)
  - `short_description` (text, for cards)
  - `plan_icon` (image upload)
  - `plan_color` (color picker, for badges)

**FSD-PLAN-002: Edit Existing Plan**
- Admin must be able to edit ALL aspects of any plan
- Changes can be:
  - Immediate (affects all users)
  - Future only (affects new subscribers)
  - Grandfathered (existing users keep old terms)
- Configuration option: `apply_changes_to` (dropdown: All Users, New Users Only, Manual Selection)

**FSD-PLAN-003: Delete/Archive Plan**
- Admin must be able to soft delete/archive plans
- Archived plans not shown on public pages
- Existing subscribers continue unchanged
- Configuration:
  - `archive_plan` button
  - `delete_plan` button (only if zero subscribers)

**FSD-PLAN-004: Duplicate Plan**
- Admin must be able to clone existing plan
- Creates copy with "_copy" suffix
- All settings duplicated
- Admin can then modify the copy

### 2.2 Plan Financial Configuration

**FSD-PLAN-005: Monthly Amount Settings**
- Admin must be able to configure:
  - `monthly_amount` (number)
  - `allow_custom_amount` (Yes/No)
  - `custom_amount_min` (number)
  - `custom_amount_max` (number)
  - `amount_increment_step` (number, e.g., 1000)

**FSD-PLAN-006: Progressive Bonus Configuration**
- Admin must be able to configure for each plan:
  - `progressive_bonus_enabled` (Yes/No)
  - `progressive_bonus_start_month` (number, default 4)
  - `progressive_bonus_rate` (percentage per month, e.g., 0.5%)
  - `progressive_bonus_max` (percentage cap, e.g., 18%)
  - `progressive_bonus_formula` (dropdown: Linear, Exponential, Custom)
  - `custom_formula` (text field for advanced users, e.g., "(month-3)*0.6")
  - Month-by-month override:
    - Table with 36 rows
    - Each row: Month number, Bonus %
    - Admin can override specific months

**FSD-PLAN-007: Milestone Bonus Configuration**
- Admin must be able to configure:
  - `milestone_bonus_enabled` (Yes/No)
  - Milestone definitions (add/edit/delete unlimited milestones):
    - `milestone_month` (number, e.g., 12)
    - `milestone_amount` (rupees, e.g., 2000)
    - `milestone_name` (text, e.g., "1 Year Completion")
    - `requires_consecutive_payments` (Yes/No)
  - Default milestones (12m, 24m, 36m) but can add more
  - Can add milestone at month 6, 18, 30, etc.

**FSD-PLAN-008: Consistency Bonus Configuration**
- Admin must be able to configure:
  - `consistency_bonus_enabled` (Yes/No)
  - `consistency_bonus_amount` (rupees per on-time payment)
  - Streak multipliers (add/edit/delete unlimited):
    - `streak_months` (number, e.g., 6)
    - `multiplier` (number, e.g., 3)
  - `on_time_definition` (dropdown: Due Date, Grace Period, Custom Days)
  - `grace_period_days` (number, if selected)

**FSD-PLAN-009: Referral Multiplier Configuration**
- Admin must be able to configure per plan:
  - `referral_multiplier_enabled` (Yes/No)
  - `max_multiplier` (number, e.g., 3.0)
  - Tier definitions (add/edit/delete unlimited tiers):
    - `referral_count_min` (number, e.g., 5)
    - `referral_count_max` (number, e.g., 9)
    - `multiplier` (number, e.g., 2.0)
  - `different_multiplier_per_plan` (Yes/No)
  - Plan D can have higher max multiplier than Plan A

**FSD-PLAN-010: Profit Sharing Configuration**
- Admin must be able to configure per plan:
  - `profit_share_enabled` (Yes/No)
  - `profit_share_percentage` (percentage, e.g., 10%)
  - `profit_share_frequency` (dropdown: Monthly, Quarterly, Yearly)
  - `minimum_investment_for_eligibility` (rupees)
  - `minimum_months_active` (number)

**FSD-PLAN-011: Lucky Draw Entry Configuration**
- Admin must be able to configure per plan:
  - `lucky_draw_entries_per_payment` (number, e.g., 3)
  - `bonus_entries_for_on_time` (number, extra entries if on-time)
  - `max_entries_per_month` (number, cap)

**FSD-PLAN-012: Celebration Bonus Configuration**
- Admin must be able to configure per plan:
  - `celebration_bonus_enabled` (Yes/No)
  - `birthday_bonus` (rupees)
  - `anniversary_bonus` (rupees)
  - `festival_bonuses` (add/edit/delete unlimited festivals):
    - `festival_name` (text, e.g., "Diwali")
    - `festival_date` (date or formula like "3rd Thursday of November")
    - `bonus_amount` (rupees)

### 2.3 Plan Display & Marketing

**FSD-PLAN-013: Plan Features List**
- Admin must be able to add/edit unlimited features per plan
- Each feature:
  - `feature_text` (text, e.g., "24/7 Priority Support")
  - `feature_icon` (icon selector or upload)
  - `feature_highlight` (Yes/No, shows in different color)
  - `display_order` (number)
  - `is_active` (Yes/No)

**FSD-PLAN-014: Plan Comparison Table**
- Admin must be able to configure what shows in comparison
- Configuration:
  - Select which attributes to compare (checkboxes)
  - Reorder comparison rows (drag & drop)
  - Add custom comparison rows:
    - `row_name` (text)
    - `plan_a_value` (text)
    - `plan_b_value` (text)
    - etc.

**FSD-PLAN-015: Plan Marketing Content**
- Admin must be able to configure per plan:
  - `tagline` (text, e.g., "Best Value!")
  - `recommended_for` (text, e.g., "Young Professionals")
  - `hero_image` (image upload)
  - `case_study` (Rich text, success story)
  - `faq_items` (add/edit/delete FAQs specific to plan)
  - `call_to_action_text` (text, button label)
  - `call_to_action_color` (color picker)

### 2.4 Plan Restrictions & Rules

**FSD-PLAN-016: Eligibility Rules**
- Admin must be able to set eligibility criteria per plan:
  - `min_age` (number)
  - `max_age` (number)
  - `allowed_countries` (multi-select)
  - `kyc_level_required` (dropdown: Basic, Verified, Enhanced)
  - `min_credit_score` (number, optional)
  - `existing_plan_holders_only` (Yes/No)
  - `referral_required` (Yes/No)

**FSD-PLAN-017: Upgrade/Downgrade Rules**
- Admin must be able to configure:
  - `allow_upgrade` (Yes/No)
  - `allow_downgrade` (Yes/No)
  - `upgrade_penalty_fee` (rupees or %)
  - `downgrade_penalty_fee` (rupees or %)
  - `plan_change_frequency` (dropdown: Anytime, Monthly, Quarterly, Once Only)
  - `apply_change` (dropdown: Immediately, Next Payment Cycle, Next Month)

**FSD-PLAN-018: Pause/Cancel Rules**
- Admin must be able to configure per plan:
  - `allow_pause` (Yes/No)
  - `max_pause_duration_months` (number)
  - `pause_limit_per_year` (number)
  - `allow_cancel` (Yes/No)
  - `cancel_penalty_fee` (rupees or %)
  - `notice_period_days` (number)
  - `refund_policy` (dropdown: Full, Prorated, None)

---

## 3. PRE-IPO PRODUCT MANAGEMENT

### 3.1 Product CRUD Operations

**FSD-PROD-001: Add New Product**
- Admin must be able to add unlimited pre-IPO products
- Required fields:
  - `product_name` (text, e.g., "Swiggy")
  - `product_slug` (auto-generated, editable)
  - `company_logo` (image upload)
  - `company_founded` (year)
  - `sector` (dropdown or custom text)
  - `industry` (dropdown or custom text)
  - `headquarters` (text)
  - `website` (URL)
  - `face_value_per_unit` (rupees)
  - `min_investment` (rupees)
  - `expected_ipo_date` (date)
  - `expected_ipo_price_range` (text, e.g., "₹150-180")
  - `product_status` (dropdown: Active, Upcoming, Listed, Closed)
  - `is_featured` (Yes/No)
  - `display_order` (number)
  - `short_description` (text, 200 chars)
  - `detailed_description` (Rich text editor)

**FSD-PROD-002: Edit Product**
- Admin must be able to edit all product fields
- Option to update all existing user allocations or keep historical data
- Configuration: `update_existing_allocations` (Yes/No)

**FSD-PROD-003: Delete/Archive Product**
- Admin must be able to archive products
- Archived products not shown on public pages
- User allocations remain visible in portfolios
- Configuration:
  - `archive_product` button
  - `delete_product` button (only if zero allocations)

**FSD-PROD-004: Product Media Gallery**
- Admin must be able to upload unlimited images/videos
- Each media item:
  - File upload
  - `caption` (text)
  - `display_order` (number)
  - `is_featured` (Yes/No, shows first)

### 3.2 Product Financial Configuration

**FSD-PROD-005: Pricing Configuration**
- Admin must be able to configure:
  - `face_value_per_unit` (rupees)
  - `current_market_price` (rupees, if listed)
  - `last_price_update` (timestamp, auto)
  - `price_history` (add/edit price changes with dates)
  - `auto_update_price` (Yes/No, via API)
  - `price_api_endpoint` (URL, if auto-update)

**FSD-PROD-006: Allocation Rules**
- Admin must be able to configure:
  - `auto_allocate` (Yes/No)
  - `allocation_priority` (number, higher = priority)
  - `max_allocation_per_user` (rupees or %)
  - `diversification_rule` (text, e.g., "Max 30% per product")
  - `allocation_formula` (dropdown: Equal, Proportional, Priority-based, Custom)

### 3.3 Product Content Management

**FSD-PROD-007: Company Information**
- Admin must be able to add/edit:
  - `about_company` (Rich text)
  - `key_highlights` (add/edit/delete unlimited bullet points)
  - `founders` (add/edit/delete):
    - Name, Photo, Title, LinkedIn, Bio
  - `funding_rounds` (add/edit/delete):
    - Round name, Date, Amount, Valuation, Investors
  - `key_metrics` (add/edit/delete):
    - Metric name, Value, Unit, Date
    - Example: "Revenue", "500", "Crores", "FY2023"

**FSD-PROD-008: Financial Information**
- Admin must be able to add/edit:
  - `revenue` (add by year):
    - Year, Amount, Growth %
  - `profit_loss` (add by year)
  - `funding_raised` (total)
  - `current_valuation` (rupees)
  - `financial_documents` (upload PDFs):
    - Document name, File, Upload date

**FSD-PROD-009: Risk Disclosures**
- Admin must be able to add/edit unlimited risk factors
- Each risk:
  - `risk_category` (dropdown: Market, Business, Financial, Regulatory, etc.)
  - `risk_title` (text)
  - `risk_description` (Rich text)
  - `severity` (dropdown: Low, Medium, High, Critical)
  - `display_order` (number)

**FSD-PROD-010: News & Updates**
- Admin must be able to add/edit product-specific news
- Each news item:
  - `news_title` (text)
  - `news_content` (Rich text)
  - `news_source` (text, e.g., "Economic Times")
  - `news_url` (URL, external link)
  - `published_date` (date)
  - `is_pinned` (Yes/No)

### 3.4 Product Documents & Compliance

**FSD-PROD-011: Document Management**
- Admin must be able to upload/manage unlimited documents
- Each document:
  - `document_type` (dropdown: Prospectus, Financial Statement, Legal Agreement, Other)
  - `document_title` (text)
  - `file_upload` (PDF/DOC)
  - `uploaded_date` (date, auto)
  - `is_public` (Yes/No, visibility)
  - `requires_kyc_to_view` (Yes/No)

**FSD-PROD-012: Compliance Information**
- Admin must be able to add:
  - `sebi_approval_number` (text)
  - `sebi_approval_date` (date)
  - `compliance_notes` (Rich text)
  - `regulatory_warnings` (Rich text, shown prominently)

---

## 4. BULK PURCHASE MANAGEMENT

### 4.1 Purchase Entry

**FSD-BULK-001: Add Bulk Purchase**
- Admin must be able to record new bulk purchases
- Required fields:
  - `purchase_code` (auto-generated unique ID)
  - `product_id` (dropdown, select pre-IPO product)
  - `purchase_date` (date)
  - `seller_name` (text)
  - `seller_contact` (text)
  - `face_value_purchased` (rupees, total face value)
  - `actual_cost_paid` (rupees, what we actually paid)
  - `discount_percentage` (auto-calculated: (face_value - cost)/face_value * 100)
  - `extra_allocation_percentage` (number, e.g., 25%)
  - `total_value_received` (auto-calculated: face_value * (1 + extra_allocation_percentage/100))
  - `gross_margin` (auto-calculated: total_value_received - actual_cost_paid)
  - `gross_margin_percentage` (auto-calculated)
  - `purchase_document` (file upload, PDF/image of agreement)
  - `notes` (textarea)
  - `payment_status` (dropdown: Pending, Partial, Paid)
  - `payment_method` (dropdown: Bank Transfer, Cheque, etc.)
  - `payment_reference` (text, UTR/cheque number)

**FSD-BULK-002: Edit Bulk Purchase**
- Admin must be able to edit all bulk purchase details
- Warning if allocations already made from this purchase
- Option to recalculate dependent allocations

**FSD-BULK-003: Delete Bulk Purchase**
- Admin must be able to delete purchase
- Only if zero allocations made
- Confirmation dialog required

### 4.2 Allocation Tracking

**FSD-BULK-004: View Allocation Status**
- Admin must be able to view real-time allocation status per purchase
- Display:
  - Total value received (face value + extra)
  - Allocated to customers (rupees & %)
  - Allocated as bonuses (rupees & %)
  - Reserved for admin (rupees & %)
  - Remaining available (rupees & %)
  - Progress bars for visual representation

**FSD-BULK-005: Allocation History**
- Admin must be able to view complete allocation history per purchase
- Table showing:
  - Date, User, Amount allocated, Purpose (Investment/Bonus/Manual), Transaction ID
  - Export to Excel

**FSD-BULK-006: Manual Allocation**
- Admin must be able to manually allocate from bulk purchase
- Use cases: Admin purchases, bonuses, corrections
- Fields:
  - `user_id` (search and select user)
  - `amount` (rupees)
  - `allocation_type` (dropdown: Investment, Bonus, Correction, Admin)
  - `notes` (text, reason for manual allocation)
  - Creates UserInvestment record

### 4.3 Inventory Management

**FSD-BULK-007: Inventory Dashboard**
- Admin must see real-time inventory for each product
- Display per product:
  - Product name
  - Total purchases (sum of all bulk purchases)
  - Total allocated
  - Remaining available
  - Status indicator (In Stock / Low Stock / Out of Stock)
  - Alert if remaining < 10%

**FSD-BULK-008: Low Stock Alerts**
- System must automatically alert admin when inventory low
- Configuration:
  - `low_stock_threshold_percentage` (number, default 10%)
  - `alert_method` (checkboxes: Email, SMS, Dashboard Notification)
  - `alert_recipients` (multi-select admins)

**FSD-BULK-009: Reorder Suggestions**
- System must suggest reordering based on:
  - Current allocation rate
  - Projected demand
  - Time to new purchases
- Display: "At current rate, stock will last X days. Suggest purchasing by Y date."

---

## 5. BONUS CONFIGURATION

### 5.1 Global Bonus Settings

**FSD-BONUS-001: Global Bonus Controls**
- Admin must be able to configure globally:
  - `bonus_processing_enabled` (Yes/No, master switch)
  - `bonus_processing_frequency` (dropdown: Real-time, Hourly, Daily)
  - `bonus_allocation_source` (dropdown: Bulk Purchase Extra, Separate Budget, Both)
  - `max_bonus_percentage` (number, cap total bonuses, e.g., 20%)
  - `bonus_rounding` (dropdown: None, Round to ₹1, Round to ₹10, Round to ₹100)

**FSD-BONUS-002: Progressive Bonus Global Override**
- Admin must be able to override progressive bonus globally (all plans)
- Fields:
  - `global_progressive_enabled` (Yes/No)
  - `global_progressive_rate` (percentage)
  - `override_plan_settings` (Yes/No)

**FSD-BONUS-003: Milestone Bonus Global Override**
- Admin must be able to add global milestones (apply to all plans)
- Example: "COVID Relief Bonus" at month 15 for all users

**FSD-BONUS-004: Bonus Calculation Formula Editor**
- Admin must be able to edit bonus calculation formulas
- For advanced users: JavaScript formula editor
- Variables available:
  - `baseAmount`, `month`, `plan`, `multiplier`, `consecutivePayments`
- Default formulas provided, can be customized
- Formula testing tool before saving

### 5.2 Bonus Transaction Management

**FSD-BONUS-005: View All Bonus Transactions**
- Admin must see all bonus transactions
- Filters:
  - Bonus type, User, Date range, Status, Plan
- Table columns:
  - Transaction ID, Date, User, Type, Base Amount, Bonus Amount, Multiplier, Status
- Export to Excel

**FSD-BONUS-006: Manual Bonus Entry**
- Admin must be able to manually add bonus to user
- Fields:
  - `user_id` (search and select)
  - `bonus_type` (dropdown: Progressive, Milestone, Referral, Manual, Correction, Other)
  - `amount` (rupees)
  - `reason` (textarea, required)
  - `allocate_as_shares` (Yes/No)
  - `notify_user` (Yes/No)
- Creates BonusTransaction and allocates shares if selected

**FSD-BONUS-007: Reverse/Cancel Bonus**
- Admin must be able to reverse incorrectly credited bonus
- Find transaction, click "Reverse"
- Fields:
  - `reversal_reason` (textarea, required)
  - `notify_user` (Yes/No)
- Creates negative transaction, deducts from portfolio

**FSD-BONUS-008: Bulk Bonus Processing**
- Admin must be able to credit bonus to multiple users at once
- Use case: Festival bonus, correction, special promotion
- Upload CSV or select users
- CSV format: user_id, amount, reason
- Preview before processing
- Confirmation required

### 5.3 Referral Bonus Configuration

**FSD-BONUS-009: Referral Bonus Settings**
- Admin must be able to configure:
  - `referral_bonus_amount` (rupees per successful referral)
  - `referee_bonus_amount` (rupees, bonus for referred user)
  - `referral_completion_criteria` (dropdown: First Payment, KYC Complete, 3 Months Active)
  - `min_investment_for_completion` (rupees)
  - `max_referrals_per_user` (number, 0 = unlimited)
  - `referral_bonus_cap` (rupees, max total a user can earn)

**FSD-BONUS-010: Referral Tier Configuration**
- Admin must be able to add/edit unlimited referral tiers
- Each tier:
  - `tier_name` (text, e.g., "Bronze", "Silver", "Gold")
  - `referral_count_min` (number)
  - `referral_count_max` (number)
  - `multiplier` (number)
  - `badge_image` (image upload)
  - `badge_color` (color picker)
  - `additional_perks` (textarea, description)

**FSD-BONUS-011: Referral Campaign Manager**
- Admin must be able to create limited-time referral campaigns
- Fields:
  - `campaign_name` (text)
  - `start_date` (date)
  - `end_date` (date)
  - `bonus_multiplier` (number, e.g., 2× during campaign)
  - `special_bonus_amount` (rupees, extra per referral during campaign)
  - `max_referrals_in_campaign` (number)
  - `is_active` (Yes/No)

### 5.4 Celebration Bonus Configuration

**FSD-BONUS-012: Celebration Events Management**
- Admin must be able to add/edit/delete celebration events
- Default events: Birthday, Anniversary
- Can add: Diwali, Holi, Christmas, Eid, Independence Day, etc.
- Each event:
  - `event_name` (text)
  - `event_type` (dropdown: User-specific, Global)
  - `event_date` (date formula, e.g., "User's birthday", "October 25", "3rd Thursday of November")
  - `bonus_amount_by_plan`:
    - Plan A: ₹X
    - Plan B: ₹Y
    - Plan C: ₹Z
    - Plan D: ₹W
  - `is_recurring` (Yes/No, annually)
  - `is_active` (Yes/No)
  - `send_greeting` (Yes/No)
  - `greeting_template` (text with variables)

**FSD-BONUS-013: Birthday Bonus Configuration**
- Admin must be able to configure:
  - `birthday_bonus_enabled` (Yes/No)
  - `bonus_amount_by_plan` (Plan A: ₹5, Plan B: ₹30, etc.)
  - `birthday_message_template` (Rich text with variables)
  - `days_before_reminder` (number, e.g., send reminder 3 days before)

**FSD-BONUS-014: Anniversary Bonus Configuration**
- Admin must be able to configure:
  - `anniversary_bonus_enabled` (Yes/No)
  - `anniversary_type` (dropdown: Subscription Anniversary, Registration Anniversary, Both)
  - `bonus_amount_by_plan`
  - `anniversary_milestones` (add/edit):
    - Years (1, 2, 3, 5, 10)
    - Special bonus for each milestone
  - `anniversary_message_template` (Rich text)

---

## 6. LUCKY DRAW CONFIGURATION

### 6.1 Draw Setup

**FSD-DRAW-001: Draw Frequency Configuration**
- Admin must be able to configure:
  - `draw_enabled` (Yes/No, global)
  - `draw_frequency` (dropdown: Monthly, Quarterly, Custom)
  - `draw_day_of_month` (number, 1-31, default 31 for last day)
  - `auto_create_draws` (Yes/No, system auto-creates next draw)
  - `auto_execute_draws` (Yes/No, auto-run at midnight)
  - `entry_generation_trigger` (dropdown: On Payment, On-time Payment Only, Manual)

**FSD-DRAW-002: Prize Structure Configuration**
- Admin must be able to configure unlimited prize tiers
- Default structure can be modified:
  - Tier 1: Count, Amount per winner
  - Tier 2: Count, Amount per winner
  - Tier 3: Count, Amount per winner
  - Tier 4: Count, Amount per winner
- Can add Tier 5, 6, etc.
- Fields per tier:
  - `tier_name` (text, e.g., "Grand Prize", "First Prize")
  - `winner_count` (number)
  - `prize_amount` (rupees per winner)
  - `prize_type` (dropdown: Cash, Shares, Gift Voucher, Physical Prize)
  - `display_order` (number)
- Total prize pool auto-calculated
- Total winners auto-calculated

**FSD-DRAW-003: Entry Rules Configuration**
- Admin must be able to configure:
  - `entries_per_payment` (by plan):
    - Plan A: X entries
    - Plan B: Y entries
    - Plan C: Z entries
    - Plan D: W entries
  - `bonus_entries_for_on_time` (number, extra if paid on time)
  - `bonus_entries_for_streak` (add/edit):
    - Streak months: Bonus entries
    - Example: 6 months = +2 entries, 12 months = +5 entries
  - `max_entries_per_user_per_month` (number, cap)
  - `allow_manual_entry_addition` (Yes/No, admin can manually add)

**FSD-DRAW-004: Create New Draw**
- Admin must be able to create draw manually
- Fields:
  - `draw_name` (text, e.g., "November 2024 Draw")
  - `draw_code` (auto-generated, editable)
  - `draw_month` (month-year picker)
  - `draw_date` (date)
  - `draw_time` (time, default 23:59)
  - `prize_structure` (select from templates or custom)
  - `entry_eligibility_start` (date, entries counted from)
  - `entry_eligibility_end` (date, entries counted until)
  - `status` (dropdown: Upcoming, Open, Drawn, Completed, Cancelled)
  - `draw_video_url` (URL, YouTube/Vimeo embed for transparency)
  - `terms_and_conditions` (Rich text)

**FSD-DRAW-005: Edit Draw**
- Admin must be able to edit draw before execution
- Cannot edit after drawing (only mark as cancelled)
- All fields editable

**FSD-DRAW-006: Cancel Draw**
- Admin must be able to cancel draw
- Confirmation required
- Reason required (textarea)
- Refund entries to users or roll over to next draw (dropdown)

### 6.2 Draw Execution

**FSD-DRAW-007: Manual Draw Execution**
- Admin must be able to execute draw manually
- Pre-draw checklist (all must be checked):
  - ☐ All eligible entries recorded
  - ☐ Prize structure confirmed
  - ☐ Video recording ready
  - ☐ Witness present
- "Start Draw" button
- Live interface shows:
  - Random number generator
  - Animation for winner selection
  - Winner list populating in real-time
  - Video recording status
- "Complete Draw" button when finished

**FSD-DRAW-008: Automatic Draw Execution**
- System must auto-execute at configured time if enabled
- Cron job runs at specified time
- Process:
  1. Lock draw table
  2. Get all entries
  3. Use cryptographically secure random selection
  4. Select winners for each tier
  5. Ensure no duplicates (one user one prize)
  6. Create BonusTransaction records
  7. Update draw status = 'drawn'
  8. Send notifications
  9. Unlock table
- Email admin with results summary

**FSD-DRAW-009: Prize Distribution**
- Admin must be able to distribute prizes
- Options:
  - Auto-credit to wallet (default for cash prizes)
  - Auto-allocate as shares
  - Manual fulfillment (for physical prizes)
- Configuration per tier:
  - `distribution_method` (dropdown: Wallet, Shares, Manual)
  - `auto_distribute` (Yes/No)
- "Distribute Prizes" button
- Confirmation required
- Creates transactions and updates user wallets

**FSD-DRAW-010: Winner Management**
- Admin must be able to view all winners
- Table showing:
  - Rank, Entry Code, User Name, User ID, Prize Amount, Distribution Status, Actions
- Actions:
  - View user details
  - Resend notification
  - Mark as paid (for manual prizes)
  - Disqualify winner (if needed, with reason)
- If disqualified, system can auto-select new winner from remaining entries

### 6.3 Draw Transparency & Publishing

**FSD-DRAW-011: Result Publishing**
- Admin must be able to publish results
- Options:
  - Publish to website (public page)
  - Publish partial info (hide full names for privacy)
  - Download results PDF
  - Generate certificates for winners
- Configuration:
  - `show_full_names` (Yes/No, privacy)
  - `show_cities` (Yes/No)
  - `show_entry_codes` (Yes/No)
  - `show_prize_amounts` (Yes/No)
- "Publish Results" button changes status

**FSD-DRAW-012: Winner Certificates**
- Admin must be able to generate winner certificates
- Certificate template configurable:
  - Upload certificate background image
  - Text fields with variables: {name}, {prize}, {date}, {draw_name}
  - Font selection, size, color, position
- "Generate Certificates" button creates PDF for each winner
- Can regenerate if template changed

**FSD-DRAW-013: Draw Video Upload**
- Admin must be able to upload draw execution video
- For transparency
- Fields:
  - Video file upload OR YouTube/Vimeo URL
  - `video_title` (text)
  - `video_description` (textarea)
- Embedded on results page

### 6.4 Draw Analytics

**FSD-DRAW-014: Draw Statistics**
- Admin must see detailed statistics per draw:
  - Total entries
  - Total participants (unique users)
  - Entries by plan breakdown
  - Entry distribution (chart)
  - Winner statistics
  - Prize pool distributed
  - Pending distributions
- Export statistics to Excel/PDF

**FSD-DRAW-015: Historical Draw Data**
- Admin must be able to view all past draws
- Filters: Date range, Status, Prize pool range
- Export complete draw history

---

## 7. PROFIT SHARING CONFIGURATION

### 7.1 Profit Calculation Setup

**FSD-PROFIT-001: Profit Sharing Settings**
- Admin must be able to configure:
  - `profit_sharing_enabled` (Yes/No, global)
  - `profit_sharing_frequency` (dropdown: Monthly, Quarterly, Bi-annually, Annually)
  - `distribution_months` (multi-select: Jan, Apr, Jul, Oct for quarterly)
  - `auto_calculate` (Yes/No, system auto-calculates)
  - `auto_distribute` (Yes/No, system auto-distributes)
  - `approval_required` (Yes/No, admin must approve before distribution)
  - `profit_share_by_plan`:
    - Plan A: X%
    - Plan B: Y%
    - Plan C: Z%
    - Plan D: W%
  - Can add more plans dynamically

**FSD-PROFIT-002: Profit Calculation Formula**
- Admin must be able to configure calculation:
  - `revenue_sources` (checkboxes: Investment Margins, Exit Fees, Other)
  - `cost_items` (checkboxes: Operating Costs, Marketing, Salaries, Bonus Payouts, Other)
  - `profit_formula` (dropdown: Net Profit, Gross Profit, Custom)
  - `custom_formula` (text field for advanced users)
  - Formula variables: {revenue}, {costs}, {bonuses_paid}, {users_count}
  - Formula tester before saving

**FSD-PROFIT-003: Eligibility Criteria**
- Admin must be able to set eligibility rules:
  - `min_subscription_months` (number, e.g., user must be active for 3 months)
  - `min_total_investment` (rupees)
  - `payment_status` (dropdown: All Payments Current, Allow 1 Missed, Allow 2 Missed)
  - `exclude_suspended_users` (Yes/No)
  - `exclude_cancelled_subscriptions` (Yes/No)
  - `pro_rata_for_partial_period` (Yes/No, if user subscribed mid-quarter)

### 7.2 Profit Distribution

**FSD-PROFIT-004: Create Profit Share Period**
- Admin must be able to create new profit share period
- Fields:
  - `period_name` (text, e.g., "Q4 2024")
  - `period_type` (dropdown: Monthly, Quarterly, Yearly)
  - `start_date` (date)
  - `end_date` (date)
  - `total_revenue` (rupees, manual entry)
  - `total_costs` (rupees, manual entry)
  - `net_profit` (auto-calculated: revenue - costs)
  - `profit_to_share` (rupees, manual or % of net profit)
  - `notes` (textarea)
  - `financial_document` (file upload, P&L statement)

**FSD-PROFIT-005: Calculate Distribution**
- Admin must click "Calculate Distribution"
- System calculates for each eligible user:
  - User's plan
  - Plan's profit share %
  - User's investment amount during period
  - Total investment for that plan by all users
  - User's share = (user_investment / total_plan_investment) × plan_pool
- Preview table shows all users and amounts
- Total distribution equals profit_to_share
- Can adjust individual user amounts manually
- Export preview to Excel

**FSD-PROFIT-006: Approve & Distribute**
- Admin must review and approve distribution
- Approval steps:
  - Review calculation
  - Check financial document uploaded
  - Verify total matches available profit
  - Enter admin password for confirmation
- "Approve & Distribute" button
- System creates BonusTransaction for each user
- Credits amounts to wallets or allocates as shares (configurable)
- Sends notification emails
- Status changes to 'distributed'

**FSD-PROFIT-007: Manual Adjustments**
- Admin must be able to adjust individual user amounts before distribution
- Use cases: Corrections, special circumstances
- Click user row, enter new amount
- System recalculates total
- Warning if total exceeds available profit
- All adjustments logged in audit trail

**FSD-PROFIT-008: Reverse Distribution**
- Admin must be able to reverse distribution if error
- Only within 24 hours of distribution
- "Reverse Distribution" button
- Requires reason (textarea)
- Creates negative transactions
- Deducts from user wallets
- Status changes to 'reversed'
- Can recalculate and redistribute

### 7.3 Profit Transparency

**FSD-PROFIT-009: Publish Financial Report**
- Admin must be able to publish quarterly financial report
- Configuration:
  - `report_visibility` (dropdown: Public, Users Only, Premium Users)
  - `show_detailed_breakdown` (Yes/No)
  - `show_cost_breakdown` (Yes/No)
  - `anonymize_user_data` (Yes/No)
- Report template customizable (Rich text editor with variables)
- "Publish Report" button makes it live on website

**FSD-PROFIT-010: Profit Share History**
- Admin must see all past profit distributions
- Table showing:
  - Period, Start Date, End Date, Revenue, Costs, Net Profit, Distributed, Users Count, Status
- Click to view detailed breakdown
- Export all history to Excel

---

## 8. USER MANAGEMENT

### 8.1 User CRUD Operations

**FSD-USER-001: View All Users**
- Admin must see paginated list of all users
- Table columns (customizable):
  - User ID, Name, Email, Mobile, Plan, Status, KYC Status, Total Invested, Registered Date, Last Login, Actions
- Filters:
  - Status (Active, Pending, Suspended, Blocked)
  - KYC Status (Pending, Submitted, Verified, Rejected)
  - Plan (A, B, C, D, None)
  - Registration Date Range
  - Investment Range
  - Search (Name, Email, Mobile, User ID)
- Sort by any column
- Select visible columns (checkbox)
- Export to Excel/CSV
- Pagination: 25/50/100/All per page

**FSD-USER-002: View User Details**
- Admin must click user to see complete profile
- Tabs:
  - **Overview**: Photo, basic info, status badges, quick stats
  - **Profile**: All profile fields (editable)
  - **KYC**: Documents viewer, verification status, approve/reject actions
  - **Subscriptions**: Active/past subscriptions, payment history
  - **Investments**: Portfolio, allocations, current value
  - **Bonuses**: All bonuses earned, breakdown by type
  - **Referrals**: Users referred, multiplier status, earnings
  - **Transactions**: All wallet transactions
  - **Withdrawals**: All withdrawal requests and status
  - **Activity Log**: Login history, IP addresses, actions performed
  - **Support Tickets**: All tickets created by user
  - **Documents**: All uploaded documents
  - **Notes**: Admin-only internal notes

**FSD-USER-003: Create New User (Admin)**
- Admin must be able to create user account manually
- Use case: Offline registration, special cases
- All registration fields available
- Option to skip email/mobile verification
- Option to set KYC verified immediately
- Option to subscribe to plan immediately
- Send welcome email (Yes/No)

**FSD-USER-004: Edit User Profile**
- Admin must be able to edit any user profile field
- Fields:
  - Name, Email, Mobile, Date of Birth, Gender, Address, etc.
  - Plan (change subscription plan)
  - Status (Active, Suspended, Blocked)
  - KYC Status (Pending, Verified, Rejected)
- "Save Changes" button
- Log all changes in activity log
- Option to notify user of changes

**FSD-USER-005: Delete User**
- Admin must be able to delete user account
- Soft delete only (data retained for compliance)
- Confirmation required with password
- Options:
  - Delete immediately
  - Schedule deletion (date)
  - Reason required (dropdown + textarea)
- User data anonymized (keep transaction records)
- Cannot delete if active investments
- Must settle all balances first

### 8.2 User Status Management

**FSD-USER-006: Suspend User**
- Admin must be able to suspend user temporarily
- Suspend modal fields:
  - `suspension_reason` (dropdown: Non-payment, Policy Violation, Fraud Suspected, Other)
  - `suspension_notes` (textarea)
  - `suspension_duration` (number, days, 0 = indefinite)
  - `auto_unsuspend` (Yes/No)
  - `notify_user` (Yes/No)
  - `suspend_payments` (Yes/No)
  - `suspend_withdrawals` (Yes/No)
  - `suspend_referrals` (Yes/No)
- User cannot login when suspended
- Shows suspension message to user

**FSD-USER-007: Block User**
- Admin must be able to block user permanently
- Stronger than suspension
- Block modal fields:
  - `block_reason` (dropdown: Fraud, Terms Violation, Legal Issue, Other)
  - `block_notes` (textarea, detailed)
  - `blacklist_email` (Yes/No, prevent future registration)
  - `blacklist_mobile` (Yes/No)
  - `blacklist_ip` (Yes/No)
  - `notify_user` (Yes/No)
  - `freeze_funds` (Yes/No)
- User cannot login
- All active subscriptions cancelled
- Funds frozen (if selected)

**FSD-USER-008: Unblock/Unsuspend User**
- Admin must be able to reinstate suspended/blocked users
- "Reinstate User" button
- Fields:
  - `reinstatement_notes` (textarea)
  - `unfreeze_funds` (Yes/No)
  - `notify_user` (Yes/No)
- Status changes to Active
- User can login again

### 8.3 User Financial Management

**FSD-USER-009: Adjust User Wallet Balance**
- Admin must be able to manually adjust user wallet
- Use cases: Refund, correction, compensation, penalty
- Fields:
  - `adjustment_type` (dropdown: Credit, Debit)
  - `amount` (rupees)
  - `reason_category` (dropdown: Refund, Bonus Correction, Technical Issue, Compensation, Penalty, Other)
  - `reason_details` (textarea, required)
  - `notify_user` (Yes/No)
  - `send_email_notification` (Yes/No)
- Creates Transaction record type='adjustment'
- Updates wallet balance
- All adjustments logged

**FSD-USER-010: Manual Bonus Award**
- Admin must be able to award bonus to specific user
- Already covered in FSD-BONUS-006 but worth emphasizing
- Quick action from user profile page

**FSD-USER-011: Override Investment Allocation**
- Admin must be able to manually allocate shares to user
- Use case: Correction, special allocation, admin purchase
- Fields:
  - `product_id` (dropdown)
  - `amount` (rupees, face value)
  - `source` (dropdown: Bulk Purchase ID, Manual Entry, Gift)
  - `notes` (textarea)
- Creates UserInvestment record
- Deducts from bulk purchase inventory

**FSD-USER-012: Force Payment Processing**
- Admin must be able to manually mark payment as paid
- Use case: Payment made outside system, correction
- Select pending payment
- "Mark as Paid" button
- Fields:
  - `payment_reference` (text, UTR/transaction ID)
  - `payment_proof` (file upload, screenshot)
  - `notes` (textarea)
- Triggers normal payment flow (bonuses, allocations)
- Marked as 'manually_processed'

### 8.4 User Communication

**FSD-USER-013: Send Email to User**
- Admin must be able to send email to specific user
- From user profile page
- Fields:
  - `subject` (text)
  - `message` (Rich text editor)
  - `attach_files` (file uploads)
  - `use_template` (dropdown, select saved template)
- "Send Email" button
- Email logged in activity log

**FSD-USER-014: Send SMS to User**
- Admin must be able to send SMS to specific user
- Fields:
  - `message` (text, max 160 chars)
  - `use_template` (dropdown)
- "Send SMS" button
- SMS logged in activity log

**FSD-USER-015: Send Push Notification**
- Admin must be able to send push notification to user (if app installed)
- Fields:
  - `title` (text)
  - `message` (text)
  - `action_url` (URL, deep link)
- "Send Notification" button

### 8.5 Bulk User Operations

**FSD-USER-016: Bulk User Actions**
- Admin must be able to perform actions on multiple users
- Select users (checkboxes)
- Available bulk actions:
  - Send email (compose once, send to all)
  - Send SMS (compose once, send to all)
  - Change status (Active, Suspended)
  - Export selected (Excel/CSV)
  - Add to segment (for targeted campaigns)
  - Award bonus (same amount to all)
  - Delete users (with confirmation)
- Confirmation required for destructive actions
- Progress bar for long operations
- Summary report after completion

**FSD-USER-017: Advanced User Search**
- Admin must have advanced search builder
- Combine multiple criteria:
  - Plan = B AND Total Invested > 50000 AND KYC = Verified
  - Last Login < 30 days ago AND Referrals > 5
- Logical operators: AND, OR, NOT
- Save search queries for reuse
- Export results

**FSD-USER-018: User Segmentation**
- Admin must be able to create user segments
- Segments based on:
  - Plan, Investment amount, Activity level, KYC status, Registration date, etc.
- Save segments with names
- Use segments for:
  - Targeted email campaigns
  - Special bonus offers
  - Analyze behavior
- Example segments:
  - "High Value Users" (Invested > ₹1L)
  - "Inactive Users" (No login in 30 days)
  - "VIP Referrers" (5+ referrals)

---

## 9. KYC MANAGEMENT

### 9.1 KYC Document Requirements Configuration

**FSD-KYC-001: Document Type Configuration**
- Admin must be able to configure which documents are required
- For each document type:
  - `document_type` (Aadhaar, PAN, Demat, Bank Proof, Address Proof, Photo, Other)
  - `is_required` (Yes/No)
  - `is_mandatory_for_investment` (Yes/No)
  - `display_order` (number)
  - `instructions` (Rich text, shown to user)
  - `allowed_file_types` (checkboxes: JPG, PNG, PDF)
  - `max_file_size_mb` (number)
  - `min_resolution` (text, e.g., "800x600")
  - `expiry_applicable` (Yes/No, e.g., address proof may expire)
  - `validity_period_months` (number, if expiry applicable)

**FSD-KYC-002: Add Custom Document Type**
- Admin must be able to add custom document types
- Example: "Income Certificate", "Employment Letter", "Business Proof"
- All configuration options available

**FSD-KYC-003: Auto-Verification Settings**
- Admin must be able to configure auto-verification:
  - `aadhaar_auto_verify` (Yes/No)
  - `aadhaar_api_provider` (dropdown: DigiLocker, UIDAI, Other)
  - `aadhaar_api_key` (text)
  - `pan_auto_verify` (Yes/No)
  - `pan_api_provider` (dropdown: Income Tax, Third-party)
  - `pan_api_key` (text)
  - `bank_auto_verify` (Yes/No, penny drop)
  - `bank_api_provider` (dropdown: Razorpay, PayU, Direct Bank)
  - `auto_approve_if_verified` (Yes/No, auto-approve KYC if all auto-verifications pass)

### 9.2 KYC Verification Workflow

**FSD-KYC-004: KYC Queue Management**
- Admin must see KYC submissions queue
- Filters:
  - Status (Pending, Under Review, Verified, Rejected, Resubmitted)
  - Submission Date Range
  - Priority (High-value users flagged)
  - Assigned To (admin dropdown)
  - Auto-verification Status (All Passed, Some Failed, Not Run)
- Sort by: Submission date, User value, Priority
- Bulk actions:
  - Assign to admin
  - Bulk approve (if criteria met)
  - Export queue
- SLA indicator (red if pending > 24 hours)

**FSD-KYC-005: Document Verification Interface**
- Admin must have powerful document viewer
- Features:
  - Zoom in/out
  - Rotate image
  - Enhance/adjust brightness/contrast
  - Side-by-side comparison (e.g., Aadhaar front and PAN)
  - Full screen mode
  - Download original file
  - OCR text extraction (show extracted data)
  - Compare extracted data with user-entered data

**FSD-KYC-006: Verification Checklist**
- Admin must complete checklist before approving:
  - ☐ Photo clear and readable
  - ☐ Name matches across all documents
  - ☐ DOB matches across all documents
  - ☐ Address matches (or explained)
  - ☐ Documents valid and not expired
  - ☐ No signs of tampering or photoshop
  - ☐ Face photo matches Aadhaar photo (visual check)
  - ☐ Bank account verified (penny drop successful)
  - ☐ Demat account format valid
- Cannot approve unless all checked

**FSD-KYC-007: Approve KYC**
- Admin clicks "Approve" button
- Confirmation modal:
  - Review checklist one more time
  - `approval_notes` (textarea, optional)
  - `notify_user` (Yes/No, checked by default)
- User status changes to 'verified'
- Timestamp recorded
- Admin name recorded
- Email/SMS sent to user

**FSD-KYC-008: Reject KYC**
- Admin clicks "Reject" button
- Rejection modal:
  - `rejection_reason_category` (dropdown: Document Unclear, Name Mismatch, Document Expired, Suspected Fraud, Other)
  - `rejection_details` (textarea, detailed explanation required)
  - `documents_to_resubmit` (checkboxes, which specific documents)
  - `provide_instructions` (textarea, what user should do)
  - `notify_user` (Yes/No, checked by default)
  - `block_user` (Yes/No, if fraud suspected)
- Status changes to 'rejected'
- Detailed email sent to user with instructions

**FSD-KYC-009: Request Resubmission**
- Admin clicks "Request Resubmission" button
- Similar to reject but gentler
- Use case: Document quality issues, minor discrepancies
- Fields:
  - `documents_to_resubmit` (checkboxes)
  - `resubmission_reason` (textarea)
  - `instructions` (textarea, helpful guidance)
- Status changes to 'resubmission_requested'
- User can resubmit specific documents
- Returns to queue when resubmitted

**FSD-KYC-010: Add Verification Notes**
- Admin must be able to add internal notes to KYC
- Not visible to user
- Use case: Document observations, discussion with team, follow-up needed
- Timestamped
- Admin name recorded
- Can add multiple notes

### 9.3 KYC Analytics & Reporting

**FSD-KYC-011: KYC Statistics Dashboard**
- Admin must see KYC metrics:
  - Total submissions today/week/month
  - Pending count (with SLA breach count)
  - Verified count
  - Rejected count
  - Average processing time
  - Auto-verification success rate
  - Rejection reasons breakdown (pie chart)
  - Verification by admin (who verified how many)
- Drill down for details

**FSD-KYC-012: KYC Compliance Report**
- Admin must generate KYC compliance report
- For regulatory purposes
- Filters:
  - Date range
  - Status
  - Document type
- Report includes:
  - Total KYCs processed
  - Verification rate
  - Rejection rate and reasons
  - Average processing time
  - Documents stored securely
  - Retention compliance (7 years)
- Export to PDF (for audit)

---

## 10. PAYMENT & WITHDRAWAL MANAGEMENT

### 10.1 Payment Gateway Configuration

**FSD-PAY-001: Gateway Setup**
- Admin must be able to configure multiple payment gateways
- For each gateway:
  - `gateway_name` (text, e.g., "Razorpay", "PayU", "Paytm")
  - `is_enabled` (Yes/No)
  - `is_default` (Yes/No, one must be default)
  - `mode` (dropdown: Test, Live)
  - `api_key` (text)
  - `api_secret` (text, encrypted)
  - `webhook_secret` (text, encrypted)
  - `supported_methods` (checkboxes: UPI, Cards, Net Banking, Wallets)
  - `transaction_charge_percentage` (number)
  - `transaction_charge_fixed` (rupees)
  - `charge_borne_by` (dropdown: Platform, User)
  - `min_transaction_amount` (rupees)
  - `max_transaction_amount` (rupees)
  - `display_order` (number, order shown to users)
  - `logo` (image upload)
- "Test Connection" button to verify credentials

**FSD-PAY-002: Payment Methods Configuration**
- Admin must be able to enable/disable specific payment methods
- For each method:
  - UPI, Credit Card, Debit Card, Net Banking, Wallets (Paytm, PhonePe, etc.)
  - `is_enabled` (Yes/No toggle)
  - `display_name` (text, shown to user)
  - `icon` (image upload)
  - `processing_fee_percentage` (number, if different from gateway default)
  - `min_amount` (rupees)
  - `max_amount` (rupees)

**FSD-PAY-003: Auto-Debit Configuration**
- Admin must be able to configure auto-debit/mandate settings:
  - `auto_debit_enabled` (Yes/No, global)
  - `mandate_max_amount` (rupees, as per RBI)
  - `mandate_validity_years` (number, default 5)
  - `retry_on_failure` (Yes/No)
  - `retry_attempts` (number, default 2)
  - `retry_interval_hours` (number, default 24)
  - `notify_before_debit_days` (number, send reminder X days before)

### 10.2 Payment Processing

**FSD-PAY-004: View All Payments**
- Admin must see all payment transactions
- Table columns:
  - Payment ID, User, Plan, Amount, Gateway, Method, Status, Date, Actions
- Filters:
  - Status (Pending, Paid, Failed, Refunded)
  - Gateway, Method, Date range, Amount range
  - User search, Plan
- Export to Excel
- Real-time updates (auto-refresh every 30 seconds)

**FSD-PAY-005: View Payment Details**
- Admin clicks payment to see full details:
  - User information
  - Subscription details
  - Payment amount breakdown
  - Gateway response
  - Transaction ID / UTR
  - Payment proof (if manual)
  - IP address, device, browser
  - Timestamp
  - Status history
- Action buttons:
  - Refund payment
  - Resend confirmation
  - Mark as failed
  - Download receipt

**FSD-PAY-006: Manual Payment Entry**
- Admin must be able to record offline payment
- Use case: Cash payment, direct bank transfer, cheque
- Fields:
  - `user_id` (search and select)
  - `subscription_id` (dropdown, user's subscriptions)
  - `amount` (rupees)
  - `payment_method` (dropdown: Cash, Bank Transfer, Cheque, Other)
  - `payment_reference` (text, cheque number, UTR, etc.)
  - `payment_date` (date)
  - `payment_proof` (file upload, mandatory)
  - `notes` (textarea)
  - `process_as_regular_payment` (Yes/No, if Yes triggers bonuses and allocations)
- "Record Payment" button
- Creates Payment record with status='paid'
- Marked as 'manually_processed'

**FSD-PAY-007: Refund Payment**
- Admin must be able to refund payment
- Click payment, then "Refund" button
- Fields:
  - `refund_amount` (rupees, can be partial, max = payment amount)
  - `refund_reason` (dropdown + textarea)
  - `refund_method` (dropdown: Original Method, Wallet, Bank Transfer)
  - `reverse_allocation` (Yes/No, deduct shares from portfolio)
  - `reverse_bonuses` (Yes/No, deduct bonuses earned)
  - `notify_user` (Yes/No)
- If original method: Calls gateway refund API
- If wallet: Credits wallet directly
- Creates Transaction record type='refund'
- Updates Payment status='refunded'

**FSD-PAY-008: Handle Failed Payments**
- Admin must see failed payments dashboard
- Failed payments list with reasons
- Actions available:
  - Retry payment
  - Mark as resolved
  - Contact user
  - Cancel subscription
- Bulk retry option (select multiple, retry all)

### 10.3 Withdrawal Management

**FSD-WITHDRAW-001: Withdrawal Settings**
- Admin must be able to configure withdrawal system:
  - `withdrawal_enabled` (Yes/No, global)
  - `min_withdrawal_amount` (rupees, default 1000)
  - `max_withdrawal_amount_per_day` (rupees)
  - `max_withdrawal_amount_per_transaction` (rupees)
  - `withdrawal_fee_type` (dropdown: Fixed, Percentage, Tiered)
  - `withdrawal_fee_amount` (rupees or %)
  - `withdrawal_fee_borne_by` (dropdown: User, Platform, Split)
  - `auto_approval_enabled` (Yes/No)
  - `auto_approval_max_amount` (rupees, e.g., auto-approve if <= 5000)
  - `auto_approval_criteria`:
    - `min_user_age_days` (number)
    - `min_successful_transactions` (number)
    - `no_fraud_flags` (Yes/No)
  - `processing_time_hours` (number, SLA)
  - `business_days_only` (Yes/No)
  - `holidays_calendar` (select country/region)

**FSD-WITHDRAW-002: Withdrawal Fee Tiers**
- Admin must be able to configure tiered withdrawal fees
- Add unlimited tiers:
  - `tier_name` (text, e.g., "Small", "Medium", "Large")
  - `amount_min` (rupees)
  - `amount_max` (rupees)
  - `fee_fixed` (rupees)
  - `fee_percentage` (%)
  - `fee_calculation` (dropdown: Fixed Only, Percentage Only, Fixed + Percentage, Max of Both, Min of Both)
- Example: 
  - 0-5000: ₹0
  - 5001-25000: ₹20
  - 25001+: 0.5%

**FSD-WITHDRAW-003: View Withdrawal Queue**
- Admin must see all withdrawal requests
- Table columns:
  - Withdrawal ID, User, Amount, Fee, Net Amount, Bank Details (preview), Status, Requested Date, Age (hours), Actions
- Filters:
  - Status (Pending, Approved, Processing, Completed, Rejected, Cancelled)
  - Date range, Amount range
  - User search
  - Sort by: Age (oldest first), Amount (highest first)
- Color coding:
  - Red: Pending > 48 hours (SLA breach)
  - Yellow: Pending > 24 hours
  - Green: Within SLA
- Bulk actions:
  - Approve selected
  - Reject selected
  - Export selected

**FSD-WITHDRAW-004: View Withdrawal Details**
- Admin clicks withdrawal to see full details:
  - User information (name, KYC status, account age)
  - Withdrawal details (amount, fee, net)
  - Bank account details (full details)
  - KYC bank account (for comparison)
  - Wallet balance before/after
  - Request timestamp
  - Status history with timestamps
  - Fraud indicators:
    - First withdrawal? (flag)
    - Large amount? (flag)
    - Multiple requests today? (flag)
    - Recent account changes? (flag)
    - Different bank than KYC? (flag)
  - Recent transactions (last 10)
  - Deposit/withdrawal pattern chart

**FSD-WITHDRAW-005: Approve Withdrawal**
- Admin clicks "Approve" button
- Approval modal:
  - Review all details
  - Verify bank account matches KYC (checkbox)
  - `approval_notes` (textarea, optional)
  - `notify_user` (Yes/No)
  - `auto_process` (Yes/No, if integrated with bank API)
- "Confirm Approval" button
- Status changes to 'approved'
- If auto_process: Initiates bank transfer via API
- If manual: Admin must process separately

**FSD-WITHDRAW-006: Reject Withdrawal**
- Admin clicks "Reject" button
- Rejection modal:
  - `rejection_reason` (dropdown: Insufficient Balance, Bank Details Mismatch, Suspected Fraud, Policy Violation, Other)
  - `rejection_details` (textarea, detailed explanation)
  - `notify_user` (Yes/No, checked)
  - `unlock_balance` (Yes/No, checked by default)
  - `block_user` (Yes/No, if fraud)
- "Confirm Rejection" button
- Unlocks locked balance in wallet
- Sends detailed email to user

**FSD-WITHDRAW-007: Process Withdrawal (Bank Transfer)**
- After approval, admin processes bank transfer
- Options:
  - **API Method**: If bank API integrated
    - Click "Process via API"
    - System calls bank API
    - Gets instant UTR/response
    - Auto-completes withdrawal
  - **Manual Method**: Traditional
    - Admin does bank transfer outside system
    - Returns to system
    - Clicks "Mark as Processing"
    - Enters UTR number (required)
    - Uploads bank receipt (optional)
    - Clicks "Mark as Completed"
- Status changes to 'processing' then 'completed'
- User notified
- Transaction created

**FSD-WITHDRAW-008: Bulk Withdrawal Processing**
- Admin must be able to process multiple withdrawals together
- Select pending withdrawals (checkboxes)
- "Bulk Approve" button
- System generates CSV/Excel file with:
  - Beneficiary Name, Account Number, IFSC, Amount, UTR Reference
- Admin uploads to bank portal for batch transfer
- After processing, admin uploads bank response CSV
- System matches UTRs and marks as completed
- Or manually enter UTRs one by one

**FSD-WITHDRAW-009: Withdrawal Analytics**
- Admin must see withdrawal statistics:
  - Total requests today/week/month
  - Pending count (with SLA breach count)
  - Total amount pending
  - Average processing time
  - Approval rate
  - Rejection reasons breakdown
  - Withdrawal by plan breakdown
  - Peak withdrawal times (chart)
- Alerts for unusual patterns

---

## 11. FRONTEND WEBSITE MANAGEMENT

### 11.1 Page Content Management

**FSD-FRONT-001: Homepage Content Editor**
- Admin must be able to edit all homepage content
- Editable sections:
  - **Hero Section**:
    - `headline` (text)
    - `subheadline` (text)
    - `primary_cta_text` (text, e.g., "Start Investing Free")
    - `primary_cta_url` (URL)
    - `secondary_cta_text` (text)
    - `secondary_cta_url` (URL)
    - `hero_image` (image upload)
    - `hero_video` (video upload or YouTube URL)
    - `trust_badges` (add/edit/delete):
      - Badge text, Icon, Display order
  - **Value Proposition Section**:
    - `section_title` (text)
    - Add/edit/delete value cards (unlimited):
      - Card title, Description, Icon, Display order
  - **Problem-Solution Section**:
    - Edit comparison table
    - Add/remove rows
  - **Testimonials Section**:
    - Add/edit/delete testimonials (unlimited):
      - Name, Photo, City, Quote, Rating, Display order
  - **Statistics Section**:
    - Edit statistics (auto-update from database or manual):
      - Statistic name, Value, Suffix, Icon
  - **All sections**: Show/Hide toggle, Reorder (drag & drop)
- Live preview before publishing
- "Publish Changes" button

**FSD-FRONT-002: About Us Page Editor**
- Admin must be able to edit About page
- Sections:
  - Company story (Rich text)
  - Mission/Vision (Rich text)
  - Team members (add/edit/delete):
    - Name, Photo, Title, Bio, LinkedIn, Email
  - Timeline/Milestones (add/edit/delete):
    - Year, Event, Description
  - Awards/Recognition (add/edit/delete)
- SEO fields for page (see FSD-SEO-001)

**FSD-FRONT-003: How It Works Page Editor**
- Admin must be able to edit How It Works page
- Steps (add/edit/delete unlimited steps):
  - Step number, Title, Description (Rich text), Image/Icon, Display order
- Video section: Upload or YouTube URL
- FAQ section: Add/edit/delete FAQs
- CTA section: Edit text and button

**FSD-FRONT-004: Plans Page Content**
- Admin must be able to customize plans page layout
- Options:
  - Show comparison table (Yes/No)
  - Show detailed plan sections (Yes/No)
  - Show calculator (Yes/No)
  - Show plan selection wizard (Yes/No)
  - Featured plan (highlight which plan)
  - Custom content blocks (Rich text, add unlimited)
- Column order in comparison table (drag & drop)
- Hide specific comparison rows

**FSD-FRONT-005: Products Page Content**
- Admin must be able to customize products page:
  - Page title, Subtitle (Rich text)
  - Filter options (enable/disable each filter)
  - Sort options (enable/disable)
  - Grid layout (dropdown: 2, 3, 4 columns)
  - Products per page (dropdown: 9, 12, 18, 24)
  - Show featured products section (Yes/No)
  - Custom content blocks

**FSD-FRONT-006: Contact Us Page**
- Admin must be able to edit:
  - Office addresses (add/edit/delete multiple locations):
    - Location name, Address, Phone, Email, Map embed code
  - Contact form fields (enable/disable, reorder):
    - Name, Email, Phone, Subject, Message
  - Additional contact options:
    - WhatsApp number (with link)
    - Telegram
    - Social media links
  - Office hours (text or table)
  - Contact email (where submissions go)

**FSD-FRONT-007: FAQ Page Manager**
- Admin must be able to manage FAQs
- Categories (add/edit/delete):
  - Category name, Icon, Display order
- Questions (add/edit/delete unlimited):
  - Category, Question (text), Answer (Rich text), Display order, Is featured
- Search functionality for users (enable/disable)
- "Was this helpful?" feedback (enable/disable)

**FSD-FRONT-008: Blog System**
- Admin must be able to manage blog
- Posts (add/edit/delete):
  - Title, Slug, Content (Rich text editor)
  - Featured image
  - Excerpt (short description)
  - Author (dropdown, admin users)
  - Categories (multi-select)
  - Tags (add custom tags)
  - Published date
  - Status (Draft, Published, Scheduled)
  - SEO fields
- Categories (add/edit/delete)
- Tags (manage)
- Comments (enable/disable, moderate)
- Related posts (auto or manual selection)

**FSD-FRONT-009: Custom Page Builder**
- Admin must be able to create unlimited custom pages
- Drag & drop page builder:
  - Available blocks:
    - Text block (Rich text)
    - Image block
    - Video block (upload or embed)
    - Button/CTA block
    - Table block
    - Accordion/FAQ block
    - Testimonial block
    - Form block (custom forms)
    - Code block (HTML/CSS/JS)
    - Divider/Spacer
  - Drag blocks into canvas
  - Configure each block
  - Rearrange, duplicate, delete
  - Responsive preview (mobile/tablet/desktop)
- Page settings:
  - Page title, Slug, Status
  - Template (dropdown: Full width, With sidebar, Custom)
  - SEO fields
- Save as draft or publish

### 11.2 Navigation & Menu Management

**FSD-FRONT-010: Header Menu Editor**
- Admin must be able to configure header navigation
- Add/edit/delete menu items (unlimited):
  - Label (text)
  - URL (internal or external)
  - Open in (dropdown: Same window, New tab)
  - Icon (optional, icon selector)
  - Display order
  - Parent menu (for dropdowns, multi-level support)
- Mega menu support (for complex dropdowns)
- Mobile menu configuration (hamburger menu)
- Sticky header (enable/disable)
- Show login/signup buttons (Yes/No)
- Button styles (dropdown: Primary, Secondary, Ghost)

**FSD-FRONT-011: Footer Menu Editor**
- Admin must be able to configure footer
- Footer columns (add/edit/delete, up to 6 columns):
  - Column title
  - Links (add/edit/delete)
- Social media links (add/edit/delete):
  - Platform (Facebook, Twitter, Instagram, LinkedIn, YouTube, etc.)
  - URL
  - Icon (auto-selected or custom)
  - Display order
- Newsletter signup (enable/disable)
- Copyright text (with variables: {year}, {company_name})
- Footer bottom text (Rich text)

### 11.3 Design & Styling

**FSD-FRONT-014: Logo & Branding**
- Admin must be able to upload/change:
  - Main logo (for light background)
  - Logo for dark background (if different)
  - Favicon (ICO or PNG)
  - Loading animation logo
  - Email header logo
  - PDF report logo
  - Logo dimensions (auto-resize or manual)
- Logo positions (dropdown: Left, Center)

**FSD-FRONT-015: Custom CSS/JS**
- Admin must be able to add custom code
- For advanced customization
- Code editors with syntax highlighting:
  - Custom CSS (textarea)
  - Custom JavaScript (textarea)
  - Custom HTML for head section (e.g., analytics)
  - Custom HTML for body (e.g., chat widget)
- Preview changes before publishing
- Warning: "Advanced users only"

**FSD-FRONT-016: Responsive Design Settings**
- Admin must be able to configure breakpoints:
  - Mobile breakpoint (default 640px)
  - Tablet breakpoint (default 1024px)
  - Desktop breakpoint (default 1440px)
- Mobile-specific settings:
  - Show/hide specific sections on mobile
  - Mobile menu style (dropdown: Hamburger, Bottom nav, Slide-out)
  - Mobile font sizes (scale percentage)

### 11.4 Forms & User Input

**FSD-FRONT-017: Custom Form Builder**
- Admin must be able to create unlimited custom forms
- Use cases: Contact form, Survey, Application form, Feedback
- Form fields (drag & drop):
  - Text input, Email, Phone, Number
  - Textarea
  - Dropdown, Multi-select
  - Radio buttons, Checkboxes
  - Date picker, Time picker
  - File upload
  - Rating (stars)
  - Hidden field (for tracking)
- Field settings:
  - Label, Placeholder, Help text
  - Required (Yes/No)
  - Validation rules
  - Min/max length or value
  - Custom validation regex
- Form settings:
  - Form title, Description
  - Submit button text
  - Success message
  - Redirect after submit (URL)
  - Email notifications (send to admins)
  - Save to database (Yes/No)
  - Google reCAPTCHA (enable/disable)
- Embed code for custom pages

**FSD-FRONT-018: Lead Capture Forms**
- Admin must be able to create lead capture forms
- Popup forms (modal):
  - Trigger: Time delay, Scroll %, Exit intent, Click button
  - Position: Center, Bottom right, Full screen
  - Show frequency: Once per session, Once per user, Always, Custom
- Embedded forms (in pages)
- Form fields minimal (Name, Email, Phone)
- Integration with CRM (optional)
- Track conversions

### 11.5 Banners & Announcements

**FSD-FRONT-019: Announcement Banner**
- Admin must be able to create announcement banners
- Top bar banner (sticky)
- Fields:
  - Message (text with formatting)
  - Background color
  - Text color
  - Link (optional, e.g., "Learn More")
  - Icon (optional)
  - Show close button (Yes/No)
  - Display on (checkboxes: Homepage, All pages, Specific pages)
  - Start date, End date
  - Is active (Yes/No)
- Dismiss behavior (dropdown: Session, Forever, Until end date)

**FSD-FRONT-020: Promotional Banners**
- Admin must be able to add promotional banners on pages
- Image/HTML banners
- Positions: Header, Sidebar, Footer, In-content
- Fields:
  - Banner image/HTML
  - Link URL
  - Alt text
  - Display on pages (multi-select)
  - Start date, End date
  - Is active
  - Click tracking (Yes/No)
- Banner rotator (multiple banners, rotate)

**FSD-FRONT-021: Popup/Modal Manager**
- Admin must be able to create popups
- Use cases: Special offers, Announcements, Newsletter signup
- Popup settings:
  - Content (Rich text or custom HTML)
  - Trigger (Time delay, Scroll, Exit intent)
  - Display frequency (Once, Daily, Always)
  - Display on (All pages, Specific pages, New users only)
  - Width, Height
  - Overlay color, Opacity
  - Close button (Yes/No)
  - Auto-close after X seconds (optional)
- A/B testing (create variants)

---

## 12. SEO & META MANAGEMENT

### 12.1 Global SEO Settings

**FSD-SEO-001: Global SEO Configuration**
- Admin must be able to configure global SEO:
  - `site_title` (text, default title suffix)
  - `site_tagline` (text)
  - `meta_description` (textarea, default if page doesn't have)
  - `meta_keywords` (textarea, comma-separated)
  - `robots_meta` (dropdown: Index/Follow, NoIndex/NoFollow, etc.)
  - `canonical_url` (toggle: Auto-generate, Custom)
  - `sitemap_enabled` (Yes/No)
  - `sitemap_auto_update` (Yes/No)
  - `google_site_verification` (text, verification code)
  - `bing_site_verification` (text)

**FSD-SEO-002: Per-Page SEO Settings**
- Admin must be able to set SEO for each page:
  - `page_title` (text, shown in browser tab)
  - `meta_description` (textarea, max 160 chars, counter shown)
  - `meta_keywords` (textarea)
  - `canonical_url` (URL, optional)
  - `robots` (dropdown: Index, NoIndex)
  - `og_title` (text, Open Graph for social media)
  - `og_description` (textarea)
  - `og_image` (image upload, for social sharing)
  - `twitter_card` (dropdown: Summary, Summary Large Image)
  - `twitter_title` (text)
  - `twitter_description` (textarea)
  - `twitter_image` (image upload)
  - `schema_markup` (textarea, JSON-LD structured data)
- Preview how it appears on Google, Facebook, Twitter

**FSD-SEO-003: SEO Analysis Tool**
- Admin must see SEO score for each page
- Analysis includes:
  - Title length (optimal 50-60 chars)
  - Meta description length (optimal 150-160 chars)
  - Keyword usage in title
  - Keyword usage in headings (H1, H2)
  - Image alt tags present
  - Internal links count
  - External links count
  - Content length (optimal 300+ words)
  - Readability score
- Score out of 100
- Recommendations for improvement

**FSD-SEO-004: Sitemap Manager**
- Admin must see and manage sitemap
- Auto-generated XML sitemap
- Options:
  - Include/exclude pages (checkboxes)
  - Set priority (0.0 to 1.0) per page
  - Set change frequency (daily, weekly, monthly)
  - Last modified date (auto or manual)
- Submit to search engines (buttons):
  - Submit to Google Search Console
  - Submit to Bing Webmaster Tools
- Download sitemap.xml

**FSD-SEO-006: Redirects Manager**
- Admin must be able to create URL redirects
- Add/edit/delete redirects (unlimited):
  - `from_url` (text, old URL)
  - `to_url` (text, new URL)
  - `redirect_type` (dropdown: 301 Permanent, 302 Temporary, 307 Temporary Redirect)
  - `is_active` (Yes/No)
- Bulk import redirects (CSV upload)
- Test redirect (check if working)
- Track redirect hits (analytics)

### 12.2 Analytics Integration

**FSD-SEO-007: Google Analytics Setup**
- Admin must be able to configure Google Analytics:
  - `tracking_id` (text, GA4 measurement ID)
  - `enabled` (Yes/No)
  - `anonymize_ip` (Yes/No, GDPR compliance)
  - `track_userid` (Yes/No, track logged-in users)
  - `enhanced_ecommerce` (Yes/No)
  - Custom dimensions (add unlimited):
    - Dimension name, Value source
  - Custom events (add unlimited):
    - Event name, Trigger condition

**FSD-SEO-008: Facebook Pixel Setup**
- Admin must be able to configure Facebook Pixel:
  - `pixel_id` (text)
  - `enabled` (Yes/No)
  - Track events (checkboxes):
    - Page View, View Content, Add to Cart, Purchase, Lead, Complete Registration
  - Custom events (add unlimited)

**FSD-SEO-009: Other Analytics Platforms**
- Admin must be able to add other platforms:
  - Google Tag Manager container ID
  - Hotjar tracking code
  - Mixpanel project token
  - Custom tracking codes (textarea)
  - Position (dropdown: Header, Footer, After body tag)

---

## 13. NOTIFICATION SYSTEM

### 13.1 Email Notifications

**FSD-NOTIF-001: Email Provider Configuration**
- Admin must be able to configure email service:
  - Provider (dropdown: SMTP, SendGrid, Mailgun, Amazon SES)
  - SMTP settings (if SMTP selected):
    - Host, Port, Encryption (SSL/TLS)
    - Username, Password
    - From email, From name
  - SendGrid settings (if SendGrid):
    - API key
    - From email, From name
  - Test email button (send test)

**FSD-NOTIF-002: Email Templates Manager**
- Admin must see list of all email templates
- System templates (cannot delete, can edit):
  - Welcome email
  - Email verification OTP
  - Password reset
  - Payment confirmation
  - Bonus credit notification
  - Milestone achievement
  - Referral success
  - Lucky draw winner
  - Withdrawal approved
  - KYC approved/rejected
  - Subscription created/cancelled
  - Support ticket reply
  - And many more...
- Custom templates (can add unlimited)

**FSD-NOTIF-003: Edit Email Template**
- Admin must be able to edit any template
- Fields:
  - `template_name` (text)
  - `template_code` (unique identifier, for system reference)
  - `subject` (text with variables, e.g., "Welcome {user_name}!")
  - `body` (Rich text editor with variable insertion)
  - `variables_available` (list shown, copy to insert)
  - `attachments` (file uploads, if any)
  - `send_from_email` (override default, optional)
  - `send_from_name` (override default, optional)
  - `reply_to_email` (optional)
  - `cc_emails` (comma-separated, optional)
  - `bcc_emails` (comma-separated, optional)
  - `is_active` (Yes/No, disable sending this email)
- Preview email (with sample data)
- Send test email button

**FSD-NOTIF-004: Email Variables System**
- System must support unlimited variables in templates
- Common variables:
  - {user_name}, {user_email}, {user_id}
  - {plan_name}, {monthly_amount}
  - {payment_amount}, {payment_date}
  - {bonus_amount}, {bonus_type}
  - {subscription_code}
  - {site_name}, {site_url}
  - {current_date}, {current_year}
- Custom variables can be added by developers

**FSD-NOTIF-005: Email Sending Rules**
- Admin must be able to configure when emails are sent:
  - For each template:
    - `enabled` (Yes/No)
    - `send_immediately` (Yes/No, or queue)
    - `send_after_minutes` (number, delay sending)
    - `max_sends_per_user_per_day` (number, prevent spam)
    - `send_only_business_hours` (Yes/No)
    - `business_hours_start` (time)
    - `business_hours_end` (time)
    - `send_only_weekdays` (Yes/No)

**FSD-NOTIF-006: Email Logs & Tracking**
- Admin must see all sent emails
- Table showing:
  - Email ID, To, Template, Subject, Sent Date, Status (Sent, Failed, Bounced, Opened, Clicked), Actions
- Filters: Template, Status, Date range, User
- Click email to see full details:
  - Full content sent
  - Delivery status
  - Open timestamp (if opened)
  - Click events (if clicked links)
  - Error message (if failed)
- Resend email button

### 13.2 SMS Notifications

**FSD-NOTIF-007: SMS Provider Configuration**
- Admin must be able to configure SMS service:
  - Provider (dropdown: MSG91, Twilio, Amazon SNS, Other)
  - MSG91 settings:
    - Auth key
    - Sender ID
    - Route (dropdown: Transactional, Promotional, OTP)
  - Twilio settings:
    - Account SID, Auth Token
    - From phone number
  - Test SMS button

**FSD-NOTIF-008: SMS Templates Manager**
- Admin must see list of all SMS templates
- System templates:
  - Mobile verification OTP
  - Password reset OTP
  - Payment confirmation
  - Payment reminder
  - Lucky draw winner
  - Withdrawal approved
  - KYC status update
- Custom templates (add unlimited)

**FSD-NOTIF-009: Edit SMS Template**
- Admin must be able to edit any template
- Fields:
  - `template_name` (text)
  - `template_code` (unique identifier)
  - `message` (textarea, max 160 chars, counter shown)
  - `variables_available` (list, insert in message)
  - `is_active` (Yes/No)
  - `dlt_template_id` (text, for DND compliance in India)
- Preview SMS with sample data
- Send test SMS button
- Character count and SMS units (160 chars = 1 SMS)

**FSD-NOTIF-010: SMS Sending Rules**
- Admin must be able to configure:
  - For each template:
    - `enabled` (Yes/No)
    - `send_immediately` (Yes/No)
    - `max_sends_per_user_per_day` (number)
    - `respect_dnd` (Yes/No, check DND registry)
    - `send_only_business_hours` (Yes/No)

**FSD-NOTIF-011: SMS Logs**
- Admin must see all sent SMS
- Table: SMS ID, To, Template, Message (preview), Sent Date, Status, Actions
- Filters and search
- Click to see full details
- Delivery status tracking

### 13.3 Push Notifications (Future - Mobile App)

**FSD-NOTIF-012: Push Notification Configuration**
- Admin must be able to configure push notifications:
  - Provider (dropdown: Firebase Cloud Messaging, OneSignal)
  - FCM settings:
    - Server key
    - Sender ID
  - OneSignal settings:
    - App ID
    - REST API key

**FSD-NOTIF-013: Push Templates Manager**
- Similar to email/SMS templates
- Templates for all events
- Edit with variables
- Send test push

**FSD-NOTIF-014: Send Manual Push Notification**
- Admin must be able to send push to users
- Broadcast or targeted:
  - All users
  - Specific plan users
  - Active users
  - Inactive users
  - Select users manually
- Fields:
  - Title, Message
  - Icon, Image
  - Action URL (deep link)
  - Sound, Badge
- Schedule sending (date/time)

### 13.4 In-App Notifications

**FSD-NOTIF-015: In-App Notification Manager**
- Admin must be able to create in-app notifications
- Shown in user dashboard notification bell
- Fields:
  - Title, Message (Rich text)
  - Type (dropdown: Info, Success, Warning, Error)
  - Icon
  - Action button (text, URL)
  - Target users (All, Specific plan, Select manually)
  - Priority (dropdown: Low, Medium, High, Urgent)
  - Expires at (date, auto-delete after)
- Is read tracking

**FSD-NOTIF-016: Notification Preferences**
- Users must be able to control notifications
- Admin configures what users can control:
  - Email notifications (checkboxes):
    - Marketing emails
    - Product updates
    - Payment reminders
    - Bonus notifications
    - Monthly reports
  - SMS notifications (checkboxes)
  - Push notifications (checkboxes)
- User dashboard has preferences page

---

## 14. REPORTING & ANALYTICS

### 14.1 Financial Reports

**FSD-REPORT-001: Revenue Report**
- Admin must generate revenue report
- Filters:
  - Date range (preset or custom)
  - Group by (Day, Week, Month, Quarter, Year)
  - Plan filter
- Shows:
  - Total revenue
  - Revenue by source (Investments, Fees, Other)
  - Revenue by plan
  - Revenue trend chart
  - Growth rate
- Export to PDF/Excel

**FSD-REPORT-002: Profit & Loss Statement**
- Admin must generate P&L
- Filters: Date range
- Shows:
  - Revenue (all sources)
  - Cost of goods sold (bonus payouts, share purchases)
  - Gross profit
  - Operating expenses (itemized)
  - Net profit
  - Profit margin %
- Comparison with previous period
- Export to PDF/Excel

**FSD-REPORT-003: Bonus Distribution Report**
- Admin must see bonus distribution analytics
- Filters: Date range, Bonus type, Plan
- Shows:
  - Total bonuses paid
  - By type breakdown (pie chart)
  - By plan breakdown
  - Average bonus per user
  - Bonus as % of investment
  - Trend over time
- Export

**FSD-REPORT-004: Investment Analysis Report**
- Admin must see investment analytics
- Shows:
  - Total investment (cumulative)
  - New investments this period
  - Investment by plan (breakdown)
  - Investment by product (which pre-IPO most popular)
  - Average investment per user
  - Investment trend (chart)
- Filters: Date range# Functional Specification Document (FSD)
- Filters: Date range, Plan
- Export

**FSD-REPORT-005: Cash Flow Statement**
- Admin must generate cash flow report
- Shows:
  - Cash inflows (investments, deposits, other)
  - Cash outflows (withdrawals, bonuses, expenses)
  - Net cash flow
  - Opening balance, Closing balance
  - Cash flow by category
- Filters: Date range
- Export

**FSD-REPORT-006: Transaction Report**
- Admin must see all financial transactions
- Filters:
  - Date range, Transaction type, User, Amount range
- Table: Date, User, Type, Description, Amount, Balance After
- Summary statistics at top
- Export to Excel/CSV

### 14.2 User Reports

**FSD-REPORT-007: User Growth Report**
- Admin must see user growth analytics
- Shows:
  - Total users (cumulative)
  - New registrations (by period)
  - Growth rate %
  - User acquisition chart
  - User by plan breakdown
  - User by status breakdown (Active, Inactive, Suspended)
- Filters: Date range
- Comparison with previous period
- Export

**FSD-REPORT-008: User Retention Report**
- Admin must see retention metrics
- Shows:
  - Active users (logged in last 30 days)
  - Inactive users (no login 30-90 days)
  - Dormant users (no login 90+ days)
  - Churn rate
  - Retention cohort analysis (table/chart)
  - Average user lifetime
- Filters: Date range, Plan
- Export

**FSD-REPORT-009: KYC Completion Report**
- Admin must see KYC statistics
- Shows:
  - Total KYC submissions
  - Verified count
  - Pending count (with SLA status)
  - Rejected count
  - Completion rate %
  - Average processing time
  - Verification by admin (who verified how many)
- Filters: Date range, Status
- Export

**FSD-REPORT-010: User Demographics Report**
- Admin must see user demographics
- Shows (if data available):
  - Age distribution (chart)
  - Gender distribution (pie chart)
  - Location distribution (map or table)
  - Plan distribution
  - Investment size distribution
- Filters: Plan, Status
- Export

### 14.3 Performance Reports

**FSD-REPORT-011: Subscription Performance Report**
- Admin must see subscription metrics
- Shows:
  - Active subscriptions by plan
  - New subscriptions this period
  - Cancelled subscriptions
  - Paused subscriptions
  - Subscription retention rate
  - Average subscription duration
  - Churn rate by plan
- Filters: Date range, Plan
- Export

**FSD-REPORT-012: Payment Collection Report**
- Admin must see payment collection analytics
- Shows:
  - Total payments collected
  - On-time payment rate
  - Late payment rate
  - Failed payment rate
  - Average payment success rate by gateway
  - Payment by method breakdown
  - Collection efficiency
- Filters: Date range, Plan, Gateway
- Export

**FSD-REPORT-013: Referral Performance Report**
- Admin must see referral program analytics
- Shows:
  - Total referrals
  - Successful referrals (completed)
  - Referral completion rate
  - Top referrers (leaderboard)
  - Average referrals per user
  - Referral bonus paid
  - Referral revenue generated
- Filters: Date range
- Export

**FSD-REPORT-014: Product Performance Report**
- Admin must see which pre-IPO products performing well
- Shows (per product):
  - Total allocated
  - Number of investors
  - Average allocation per investor
  - Current value (if market data available)
  - Unrealized gain/loss
  - Popularity ranking
- Filters: Date range, Status
- Export

**FSD-REPORT-015: Portfolio Performance Report**
- Admin must see overall portfolio analytics
- Shows:
  - Total face value allocated
  - Current market value
  - Total unrealized gain/loss
  - Average return %
  - Best performing products
  - Worst performing products
  - Sector distribution
- Filters: Date range
- Export

### 14.4 Compliance Reports

**FSD-REPORT-016: SEBI Compliance Report**
- Admin must generate SEBI-required reports
- Shows:
  - All transactions in period
  - User KYC compliance
  - Investment limits adherence
  - Audit trail of all actions
  - Document retention status
- Filters: Date range
- Format: PDF (for submission)
- Digitally signed

**FSD-REPORT-017: Tax Deduction at Source (TDS) Report**
- Admin must generate TDS report
- Shows (if TDS applicable):
  - User, PAN, Amount paid, TDS deducted, TDS rate, TDS amount
  - Total TDS collected
  - Quarter-wise breakdown
- Export for filing with tax authorities
- Format: Excel/CSV with specific columns

**FSD-REPORT-018: AML Compliance Report**
- Admin must generate Anti-Money Laundering report
- Shows:
  - Large transactions (above threshold)
  - Suspicious activity flagged
  - High-risk users
  - Transaction patterns analysis
- For internal review or submission to authorities
- Filters: Date range, Threshold amount

**FSD-REPORT-019: Audit Trail Report**
- Admin must generate complete audit trail
- Shows:
  - All admin actions (who, what, when)
  - All user actions (major events)
  - System events
  - Data modifications
  - Login/logout events
- Filters: Date range, User, Action type
- Immutable records
- Export for external audit

### 14.5 Custom Reports

**FSD-REPORT-020: Custom Report Builder**
- Admin must be able to create custom reports
- Report builder interface:
  - Select data source (table)
  - Select columns to include
  - Apply filters (multiple conditions)
  - Group by columns
  - Aggregate functions (sum, average, count, min, max)
  - Sort order
- Preview report
- Save report template
- Schedule automatic generation
- Email to recipients

**FSD-REPORT-021: Scheduled Reports**
- Admin must be able to schedule reports
- For each report:
  - Frequency (Daily, Weekly, Monthly, Quarterly)
  - Day/date to run
  - Time to run
  - Email recipients (multi-select admins)
  - Format (PDF, Excel, CSV)
  - Is active
- View scheduled reports list
- View execution history (success/failure)

---

## 15. SYSTEM SETTINGS & CONFIGURATION

### 15.1 General Settings

**FSD-SYS-101: Basic Site Settings**
- Admin must be able to configure:
  - `site_name` (text, e.g., "PreIPO SIP")
  - `site_tagline` (text)
  - `site_description` (textarea)
  - `company_name` (text, legal entity name)
  - `company_registration_number` (text)
  - `sebi_registration_number` (text)
  - `admin_email` (email, primary contact)
  - `support_email` (email)
  - `sales_email` (email)
  - `phone_number` (text)
  - `whatsapp_number` (text)
  - `office_address` (textarea)
  - `timezone` (dropdown: All timezones)
  - `currency` (dropdown: INR, USD, etc.)
  - `date_format` (dropdown: DD/MM/YYYY, MM/DD/YYYY, etc.)
  - `time_format` (dropdown: 12-hour, 24-hour)
  - `number_format` (dropdown: International, Indian)
  - `language` (dropdown: English, Hindi, both)

**FSD-SYS-102: Operational Settings**
- Admin must be able to configure:
  - `records_per_page` (number, default pagination)
  - `session_timeout_minutes` (number)
  - `login_attempts_limit` (number)
  - `login_lockout_duration_minutes` (number)
  - `file_upload_max_size_mb` (number)
  - `allowed_file_types` (checkboxes: JPG, PNG, PDF, DOC, etc.)
  - `image_quality_percentage` (number, compression)
  - `auto_logout_inactive_users` (Yes/No)
  - `inactive_timeout_minutes` (number)

**FSD-SYS-103: Maintenance Mode**
- Admin must be able to enable maintenance mode
- When enabled: Site shows maintenance page to users, admins can still access
- Configuration:
  - `maintenance_mode` (Yes/No, big toggle)
  - `maintenance_message` (Rich text, shown to users)
  - `allowed_ips` (textarea, comma-separated IPs that can access)
  - `estimated_completion_time` (datetime)
  - `show_countdown` (Yes/No, countdown timer)
- Preview maintenance page

**FSD-SYS-104: Backup Settings**
- Admin must be able to configure backups:
  - `auto_backup_enabled` (Yes/No)
  - `backup_frequency` (dropdown: Daily, Weekly, Monthly)
  - `backup_time` (time picker)
  - `backup_location` (dropdown: Local, AWS S3, Google Drive, Dropbox)
  - `backup_retention_days` (number, auto-delete old backups)
  - `include_in_backup` (checkboxes: Database, Files, Both)
  - `email_backup_report` (Yes/No)
  - `report_recipients` (multi-select admins)
- Manual backup button: "Backup Now"
- View backup history

**FSD-SYS-105: Cron Jobs Configuration**
- Admin must see all scheduled tasks
- List of cron jobs:
  - Name, Command, Schedule (cron syntax), Last run, Next run, Status, Actions
- System cron jobs (cannot delete):
  - Bonus calculation (daily)
  - Email queue processing (every 5 mins)
  - SMS queue processing (every 5 mins)
  - Lucky draw auto-execute (monthly)
  - Profit share calculation (quarterly)
  - Backup (as configured)
  - Delete old logs (weekly)
- For each cron:
  - Enable/disable toggle
  - Edit schedule (cron syntax helper)
  - Run manually button
  - View execution log
- Add custom cron job (advanced users)

### 15.2 Security Settings

**FSD-SYS-106: Password Policy**
- Admin must be able to configure password requirements:
  - `min_length` (number, default 8)
  - `require_uppercase` (Yes/No)
  - `require_lowercase` (Yes/No)
  - `require_number` (Yes/No)
  - `require_special_character` (Yes/No)
  - `password_history_count` (number, prevent reusing last X passwords)
  - `password_expiry_days` (number, 0 = never expires)
  - `expiry_warning_days` (number, warn X days before expiry)

**FSD-SYS-107: Two-Factor Authentication (2FA)**
- Admin must be able to configure 2FA:
  - `2fa_enabled` (Yes/No, global)
  - `2fa_mandatory_for_admins` (Yes/No)
  - `2fa_mandatory_for_users` (Yes/No)
  - `2fa_method` (dropdown: SMS, Email, Authenticator App, All)
  - `2fa_code_validity_minutes` (number, default 5)
  - `2fa_remember_device_days` (number, 0 = don't remember)

**FSD-SYS-108: IP Whitelisting**
- Admin must be able to whitelist IPs for admin panel
- Add/edit/delete IPs (unlimited):
  - IP address (text, supports ranges)
  - Description (text, e.g., "Office IP")
  - Is active (Yes/No)
- Warning: "Don't lock yourself out!"
- Emergency access link (bypasses IP check, expires in 24h)

**FSD-SYS-109: CAPTCHA Configuration**
- Admin must be able to configure CAPTCHA:
  - `captcha_enabled` (Yes/No)
  - `captcha_provider` (dropdown: Google reCAPTCHA v2, v3, hCaptcha)
  - `site_key` (text)
  - `secret_key` (text)
  - `show_captcha_on` (checkboxes: Login, Registration, Contact Form, etc.)
  - `captcha_threshold` (number, score threshold for reCAPTCHA v3)

**FSD-SYS-110: Rate Limiting**
- Admin must be able to configure rate limits:
  - Per endpoint rate limits:
    - Login: X attempts per Y minutes
    - API calls: X requests per Y minutes
    - File uploads: X files per Y minutes
    - Email sending: X emails per Y minutes
  - Rate limit by (checkboxes: IP, User, Both)
  - Block duration (minutes, when limit exceeded)
  - Custom rate limits (add unlimited rules)

**FSD-SYS-111: SSL/HTTPS Settings**
- Admin must be able to configure SSL:
  - `force_https` (Yes/No, redirect HTTP to HTTPS)
  - `ssl_certificate_provider` (dropdown: Let's Encrypt, Custom, Cloudflare)
  - `auto_renew_certificate` (Yes/No, for Let's Encrypt)
  - `certificate_expiry_date` (date, display only)
  - `certificate_expiry_warning` (Yes/No, email X days before)
  - `hsts_enabled` (Yes/No, HTTP Strict Transport Security)
  - `hsts_max_age_seconds` (number)

### 15.3 Email Configuration (Advanced)

**FSD-SYS-112: Email Queue Settings**
- Admin must be able to configure email queue:
  - `queue_enabled` (Yes/No, if No sends immediately)
  - `queue_driver` (dropdown: Database, Redis, Sync)
  - `queue_processing_frequency` (dropdown: Real-time, Every 5 min, Hourly)
  - `max_emails_per_batch` (number)
  - `retry_failed_emails` (Yes/No)
  - `max_retry_attempts` (number)
  - `retry_delay_minutes` (number)

**FSD-SYS-113: Email Throttling**
- Admin must be able to throttle email sending:
  - `max_emails_per_hour` (number, global limit)
  - `max_emails_per_user_per_day` (number)
  - `throttle_by_priority` (Yes/No, send high priority first)
  - `pause_emails_during_hours` (time range, e.g., 11 PM - 6 AM)

**FSD-SYS-114: Email Blacklist**
- Admin must be able to blacklist email domains/addresses:
  - Add/remove blacklist entries
  - `email_or_domain` (text, e.g., "spam@example.com" or "@temporary-email.com")
  - `reason` (textarea)
  - Block at (dropdown: Registration, All emails, Specific templates)
- Bulk import from CSV

### 15.4 Payment Settings (Advanced)

**FSD-SYS-115: Payment Limits Configuration**
- Admin must be able to set global payment limits:
  - `min_payment_amount` (rupees)
  - `max_payment_amount_per_transaction` (rupees)
  - `max_payment_amount_per_day_per_user` (rupees)
  - `max_payment_amount_per_month_per_user` (rupees)
  - `suspend_user_on_limit_breach` (Yes/No)

**FSD-SYS-116: Payment Security Settings**
- Admin must be able to configure:
  - `payment_confirmation_required` (Yes/No, email/SMS OTP before payment)
  - `payment_amount_threshold_for_confirmation` (rupees, OTP only if above)
  - `fraud_detection_enabled` (Yes/No)
  - `fraud_rules` (add custom rules):
    - Example: "Flag if payment > ₹50K and user registered < 7 days ago"
  - `auto_refund_suspicious_payments` (Yes/No)
  - `manual_review_threshold` (rupees, admin must approve above)

**FSD-SYS-117: Payment Webhook Configuration**
- Admin must be able to configure webhooks:
  - For each gateway:
    - `webhook_url` (auto-generated, display only)
    - `webhook_secret` (text, for signature verification)
    - `webhook_events` (checkboxes: payment.success, payment.failure, refund.processed, etc.)
    - `webhook_retry` (Yes/No, if webhook fails)
    - `webhook_retry_attempts` (number)
  - Webhook logs (view recent webhooks):
    - Timestamp, Gateway, Event, Status, Response
    - Resend webhook button

### 15.5 Notification Settings (Advanced)

**FSD-SYS-118: Notification Channels Priority**
- Admin must be able to set priority order:
  - For each notification type:
    - Primary channel (dropdown: Email, SMS, Push, In-app)
    - Secondary channel (if primary fails)
    - Tertiary channel
  - Example: Payment confirmation → Primary: Email, Secondary: SMS, Tertiary: In-app

**FSD-SYS-119: Notification Batching**
- Admin must be able to batch notifications:
  - `batch_notifications` (Yes/No)
  - `batch_frequency` (dropdown: Hourly, Daily, Weekly)
  - `batch_time` (time picker, for daily/weekly)
  - `notification_types_to_batch` (checkboxes: Bonus notifications, Product updates, etc.)
  - Don't batch (checkboxes: OTPs, Payment confirmations, etc.)

**FSD-SYS-120: Notification Preferences Override**
- Admin must be able to force send critical notifications:
  - `force_send_critical` (Yes/No, send even if user unsubscribed)
  - `critical_notification_types` (checkboxes: Security alerts, Payment issues, Legal notices)

### 15.6 API & Integration Settings

**FSD-SYS-121: API Access Configuration**
- Admin must be able to configure API:
  - `api_enabled` (Yes/No, global)
  - `api_version` (dropdown: v1, v2, etc.)
  - `api_base_url` (text, display only)
  - `api_documentation_url` (text, link to docs)
  - `api_rate_limit` (number, requests per minute)
  - `api_authentication` (dropdown: API Key, OAuth 2.0, JWT)
  - Generate API keys (for internal use or partners)

**FSD-SYS-122: Webhook Configuration (Outgoing)**
- Admin must be able to send webhooks to external systems:
  - Add webhook endpoints (unlimited):
    - `endpoint_name` (text, e.g., "CRM Integration")
    - `webhook_url` (URL, external system)
    - `authentication_method` (dropdown: None, API Key, Bearer Token)
    - `authentication_value` (text, encrypted)
    - `events_to_send` (checkboxes: User registered, Investment made, etc.)
    - `payload_format` (dropdown: JSON, XML)
    - `custom_headers` (key-value pairs)
    - `is_active` (Yes/No)
  - Test webhook button
  - View webhook logs (sent webhooks)

**FSD-SYS-123: Third-Party Integration Management**
- Admin must be able to manage integrations:
  - List of available integrations:
    - Google Analytics, Facebook Pixel, WhatsApp Business, CRM systems, etc.
  - For each integration:
    - Enable/disable toggle
    - Configuration fields (varies by integration)
    - Test connection button
    - Last sync timestamp
    - Sync status

### 15.7 Database & Performance

**FSD-SYS-124: Database Optimization**
- Admin must be able to optimize database:
  - "Optimize Database" button
  - What it does:
    - Optimize tables
    - Rebuild indexes
    - Clear old logs (beyond retention period)
    - Vacuum (for PostgreSQL)
  - Last optimization date displayed
  - Schedule automatic optimization (weekly recommended)

**FSD-SYS-125: Cache Management**
- Admin must be able to manage cache:
  - Cache statistics:
    - Cache hit rate %
    - Cache size (MB)
    - Cached items count
  - Cache drivers:
    - Current driver (display: Redis, File, Array)
    - Change driver (dropdown)
    - Driver configuration
  - Cache controls:
    - "Clear All Cache" button
    - "Clear View Cache" button
    - "Clear Route Cache" button
    - "Clear Config Cache" button
  - Auto-clear cache on (checkboxes: Settings change, Content update, Daily)

**FSD-SYS-126: Log Management**
- Admin must be able to manage logs:
  - View logs:
    - Application log
    - Error log
    - Access log
    - Queue log
    - Cron log
  - For each log:
    - View in browser (with syntax highlighting)
    - Download log file
    - Clear log
    - Search within log
  - Log settings:
    - `log_level` (dropdown: Debug, Info, Warning, Error, Critical)
    - `log_rotation_enabled` (Yes/No)
    - `log_max_files` (number, keep last X files)
    - `log_retention_days` (number)

**FSD-SYS-127: Performance Monitoring**
- Admin must see performance metrics:
  - Server resources:
    - CPU usage %
    - RAM usage (used/total)
    - Disk usage (used/total)
    - Network I/O
  - Application metrics:
    - Response time (average, 95th percentile)
    - Requests per minute
    - Active users (current)
    - Database queries (count, avg time)
    - Cache hit rate
    - Queue jobs (pending, processed, failed)
  - Real-time charts (auto-refresh every 30 seconds)
  - Historical data (last 24 hours, 7 days, 30 days)

### 15.8 User Roles & Permissions

**FSD-SYS-128: Role Management**
- Admin must be able to create/edit/delete roles
- Default roles (cannot delete):
  - Super Admin (full access)
  - Admin (most access)
  - Support (user management, tickets)
  - Finance (payments, withdrawals, reports)
  - Content Manager (website content, blog)
- Custom roles (add unlimited):
  - `role_name` (text)
  - `role_description` (textarea)
  - `is_admin_role` (Yes/No, can access admin panel)

**FSD-SYS-129: Permission Management**
- Admin must be able to assign permissions per role
- Permissions grouped by module:
  - **Users**: View, Create, Edit, Delete, Suspend, Block
  - **KYC**: View, Verify, Reject
  - **Plans**: View, Create, Edit, Delete, Configure
  - **Products**: View, Create, Edit, Delete
  - **Payments**: View, Process, Refund
  - **Withdrawals**: View, Approve, Reject, Process
  - **Bonuses**: View, Create, Edit, Process
  - **Lucky Draws**: View, Create, Execute, Manage
  - **Profit Sharing**: View, Calculate, Distribute
  - **Reports**: View, Generate, Export
  - **Settings**: View, Edit
  - **Content**: View, Edit, Publish
  - **Support**: View Tickets, Reply, Close
  - **API**: Access, Generate Keys
- Matrix view: Roles (columns) vs Permissions (rows)
- Checkboxes to enable/disable

**FSD-SYS-130: Admin User Management**
- Admin must be able to manage admin users
- Add admin user:
  - All user fields
  - Select role (dropdown)
  - `can_access_admin_panel` (Yes/No)
  - `receive_system_alerts` (Yes/No)
  - `receive_reports` (Yes/No)
- Edit admin user (change role, permissions)
- Deactivate admin user (cannot delete, for audit trail)
- View admin activity log (all actions performed)

---

## 16. SUPPORT & HELP SYSTEM

### 16.1 Support Ticket Configuration

**FSD-SUPPORT-001: Ticket System Settings**
- Admin must be able to configure:
  - `tickets_enabled` (Yes/No, global)
  - `allow_guest_tickets` (Yes/No, non-logged users can create)
  - `auto_assign_tickets` (Yes/No)
  - `auto_assign_logic` (dropdown: Round-robin, Least busy, By category)
  - `ticket_number_prefix` (text, e.g., "TKT-")
  - `ticket_number_format` (dropdown: Sequential, Random, Date-based)
  - `max_open_tickets_per_user` (number)
  - `ticket_attachment_allowed` (Yes/No)
  - `max_attachments_per_ticket` (number)
  - `attachment_max_size_mb` (number)

**FSD-SUPPORT-002: Ticket Categories**
- Admin must be able to add/edit/delete categories:
  - Category name (text)
  - Icon (image or icon selector)
  - Description (textarea)
  - Auto-assign to team (dropdown, select admin/team)
  - Priority default (dropdown: Low, Medium, High)
  - SLA hours (number, response time target)
  - Display order
  - Is active

**FSD-SUPPORT-003: Ticket Priority Levels**
- Admin must be able to configure priority levels:
  - Add/edit/delete priorities:
    - Priority name (text: Low, Medium, High, Urgent, Critical)
    - Color (color picker)
    - SLA hours (number, different for each priority)
    - Auto-escalate (Yes/No, escalate if SLA breached)
    - Escalate to (dropdown, select admin)
    - Email notifications (checkboxes: On create, On reply, On close)

**FSD-SUPPORT-004: Canned Responses**
- Admin must be able to create canned responses (templates):
  - Add/edit/delete responses (unlimited):
    - Response title (text, for admin reference)
    - Shortcode (text, e.g., "/welcome")
    - Response text (Rich text editor with variables)
    - Category (dropdown, for filtering)
    - Is active
  - Admin can type shortcode in reply to insert

**FSD-SUPPORT-005: Ticket Auto-Close**
- Admin must be able to configure auto-close:
  - `auto_close_enabled` (Yes/No)
  - `auto_close_after_days` (number, e.g., 7 days after resolved)
  - `auto_close_after_last_reply_days` (number, if no reply from user)
  - `send_warning_before_close` (Yes/No)
  - `warning_days_before` (number)
  - `auto_close_message` (text, sent to user)

### 16.2 Live Chat Configuration

**FSD-SUPPORT-006: Live Chat Settings**
- Admin must be able to configure live chat:
  - `live_chat_enabled` (Yes/No, global)
  - `chat_widget_position` (dropdown: Bottom right, Bottom left)
  - `chat_widget_color` (color picker)
  - `chat_widget_icon` (image upload or icon selector)
  - `show_chat_on_pages` (checkboxes: All pages, Specific pages, Exclude pages)
  - `chat_availability_hours`:
    - Days active (checkboxes: Mon-Sun)
    - Start time, End time
  - `offline_message` (text, shown when no agents online)
  - `max_chats_per_agent` (number)
  - `auto_assign_chats` (Yes/No)
  - `chat_rating_enabled` (Yes/No, ask user to rate after chat)

**FSD-SUPPORT-007: Chat Agents Management**
- Admin must be able to manage chat agents:
  - Assign agents (select admin users)
  - Agent status (Online, Away, Busy, Offline)
  - Current chats count per agent
  - Average response time per agent
  - Chat history per agent
  - Performance metrics

**FSD-SUPPORT-008: Chat Transcript**
- System must save all chat transcripts
- Admin can view/search chats:
  - Filter: Date range, Agent, User, Rating
  - Export transcripts
  - Create ticket from chat (if unresolved)

### 16.3 Knowledge Base / Help Center

**FSD-SUPPORT-009: Knowledge Base Configuration**
- Admin must be able to enable knowledge base:
  - `knowledge_base_enabled` (Yes/No)
  - `kb_url_slug` (text, e.g., "/help" or "/kb")
  - `show_in_menu` (Yes/No)
  - `search_enabled` (Yes/No)
  - `show_popular_articles` (Yes/No)
  - `show_recent_articles` (Yes/No)

**FSD-SUPPORT-010: KB Categories**
- Admin must be able to create KB categories:
  - Add/edit/delete categories:
    - Category name
    - Icon
    - Description
    - Parent category (for sub-categories)
    - Display order
    - Is active

**FSD-SUPPORT-011: KB Articles**
- Admin must be able to create articles:
  - Article title
  - Slug (auto-generated, editable)
  - Content (Rich text editor)
  - Category (dropdown)
  - Tags (add custom)
  - Featured image
  - Status (Draft, Published)
  - Author
  - Published date
  - Related articles (select manually)
  - SEO fields
  - "Was this helpful?" feedback (Yes/No/Rating)

**FSD-SUPPORT-012: KB Search Analytics**
- Admin must see what users search for:
  - Top search queries
  - Queries with no results (indicates missing content)
  - Most viewed articles
  - Least viewed articles
  - Average helpfulness rating per article

---

## 17. COMPLIANCE & LEGAL

### 17.1 Terms & Policies Management

**FSD-LEGAL-001: Terms & Conditions Editor**
- Admin must be able to edit Terms & Conditions:
  - Rich text editor
  - Version control (save versions, view history)
  - `current_version` (number, auto-incremented)
  - `effective_date` (date, when new version takes effect)
  - `require_user_acceptance` (Yes/No, force users to re-accept)
  - `show_changes_to_users` (Yes/No, highlight what changed)
  - Preview before publishing
  - Publish button

**FSD-LEGAL-002: Privacy Policy Editor**
- Same as Terms & Conditions
- Separate page
- GDPR compliance features:
  - Data collection disclosure
  - Data usage disclosure
  - User rights section
  - Cookie policy integration

**FSD-LEGAL-003: Refund/Cancellation Policy**
- Same editor features
- Specific to refunds and cancellations

**FSD-LEGAL-004: Risk Disclosure Statement**
- Admin must be able to edit risk disclosure:
  - Required before investment
  - User must check "I have read and understood" before proceeding
  - Version controlled

**FSD-LEGAL-005: Cookie Consent Banner**
- Admin must be able to configure cookie banner:
  - `cookie_consent_enabled` (Yes/No)
  - `banner_message` (text)
  - `banner_position` (dropdown: Top, Bottom, Modal)
  - `banner_layout` (dropdown: Bar, Box, Modal)
  - `accept_button_text` (text)
  - `reject_button_text` (text)
  - `settings_button_text` (text, show cookie preferences)
  - `cookie_policy_url` (link)
  - `consent_expiry_days` (number, re-ask after X days)
- Cookie categories (enable/disable each):
  - Essential (always on)
  - Analytics
  - Marketing
  - Preferences

### 17.2 User Data Management (GDPR/Privacy Compliance)

**FSD-LEGAL-006: User Data Export**
- Users must be able to request data export (GDPR right)
- From user dashboard: "Download My Data" button
- System generates comprehensive export:
  - Profile data
  - KYC documents
  - Investment history
  - Transactions
  - Messages/support tickets
  - Activity logs
- Format: ZIP file with JSON + PDF report
- Admin can also generate for any user
- Log all export requests

**FSD-LEGAL-007: User Data Deletion (Right to be Forgotten)**
- Users must be able to request account deletion
- From user dashboard: "Delete My Account" button
- Deletion modal:
  - Warning about consequences
  - Confirmation (type "DELETE" to confirm)
  - Reason (optional, dropdown + text)
- Admin review required:
  - Check for active investments
  - Check for pending withdrawals
  - Settle all balances first
  - Cannot delete if legal hold
- Soft delete:
  - Anonymize personal data (name becomes "Deleted User #12345")
  - Keep transaction records (compliance)
  - Remove PII (email, mobile, address, documents)
  - Mark as deleted in database
- Admin can also delete any user account

**FSD-LEGAL-008: Data Retention Policy**
- Admin must be able to configure retention:
  - For each data type:
    - User accounts (deleted): X years
    - Transaction records: 7 years (SEBI requirement)
    - KYC documents: 7 years
    - Audit logs: 7 years
    - Support tickets: X years
    - Email logs: X years
    - Session data: X days
  - Auto-purge after retention period
  - Purge schedule (monthly cron job)
  - Purge logs (what was deleted, when)

**FSD-LEGAL-009: Consent Management**
- Admin must be able to manage consent types:
  - Add/edit consent types:
    - Consent name (e.g., "Marketing Emails", "Data Processing")
    - Consent description (shown to user)
    - Is mandatory (Yes/No)
    - Version
  - Track user consent:
    - Who consented to what, when
    - IP address at time of consent
    - Consent version accepted
    - Withdrawal of consent
  - Consent audit trail (immutable log)

---

## 18. ADVANCED ADMIN FEATURES

### 18.1 Dashboard Customization

**FSD-ADMIN-001: Customizable Admin Dashboard**
- Admin must be able to customize their dashboard:
  - Widget library (available widgets):
    - User statistics
    - Revenue chart
    - Recent users
    - Recent payments
    - Pending KYC
    - Pending withdrawals
    - System health
    - Recent activity
    - Support tickets
    - Quick actions
  - Drag & drop interface:
    - Drag widgets from library to dashboard
    - Resize widgets (small, medium, large)
    - Reposition widgets
    - Remove widgets
  - Multiple dashboard layouts (save/load):
    - Default layout
    - Financial focus
    - Operations focus
    - Custom layouts (save with name)
  - Per-admin customization (each admin has own layout)

**FSD-ADMIN-003: Dark Mode**
- Admin must be able to toggle dark mode:
  - Switch in header (moon/sun icon)
  - Preference saved per admin
  - All admin pages support dark mode
  - Auto-switch based on system preference (optional)

### 18.2 Bulk Operations

**FSD-ADMIN-004: Bulk Import Users**
- Admin must be able to import users in bulk:
  - "Import Users" button
  - Upload CSV/Excel file
  - CSV format:
    - Column headers: name, email, mobile, plan, etc.
    - Sample template downloadable
  - Validation:
    - Check for duplicates
    - Validate email/mobile format
    - Show errors before import
  - Preview before importing (table view)
  - Options:
    - Send welcome email (Yes/No)
    - Skip email verification (Yes/No)
    - Auto-approve KYC (Yes/No, if documents in ZIP)
  - "Import" button
  - Progress bar for large imports
  - Import summary (success, failed, duplicates)
  - Download error report (for failed rows)

**FSD-ADMIN-005: Bulk Update Users**
- Admin must be able to update multiple users:
  - Select users (checkboxes)
  - "Bulk Update" button
  - Update modal:
    - Select field to update (dropdown)
    - New value (input)
    - Preview affected users
  - Examples:
    - Change plan for all selected
    - Update status (Active/Suspended)
    - Add bonus to all
    - Send email to all
  - Confirmation required
  - Log all bulk updates

**FSD-ADMIN-006: Bulk Import Investments**
- Admin must be able to import offline investments:
  - Use case: Investments made via bank transfer, cash
  - Upload CSV:
    - Columns: user_email, amount, payment_date, payment_reference, product
  - Validation and preview
  - Import creates:
    - Payment records
    - Investment allocations
    - Bonuses (if applicable)
  - Process as regular investments

**FSD-ADMIN-007: Data Export Wizard**
- Admin must have powerful export tool:
  - "Export Data" button
  - Step 1: Select data type:
    - Users, Payments, Investments, Bonuses, Transactions, etc.
  - Step 2: Configure filters:
    - Date range
    - Status
    - Plan
    - Custom criteria (advanced)
  - Step 3: Select columns:
    - Checkboxes for all available columns
    - Reorder columns (drag & drop)
  - Step 4: Select format:
    - CSV, Excel (XLSX), PDF, JSON
  - Step 5: Download or email:
    - Download immediately
    - Email to recipients
    - Schedule recurring export
  - Save export configuration for reuse

### 18.3 Activity & Audit Trail

**FSD-ADMIN-008: Global Activity Log**
- Admin must see all activity:
  - Real-time feed of all actions:
    - User registered
    - Payment made
    - KYC submitted
    - Admin action performed
    - Setting changed
    - Login/logout
  - Filters:
    - Activity type
    - User/Admin
    - Date range
    - Search (by description)
  - Each activity shows:
    - Timestamp, Actor (who), Action (what), Target (on what), IP address, Device
  - Click to see full details
  - Export activity log

**FSD-ADMIN-009: Admin Audit Trail**
- Admin must see admin-specific audit trail:
  - All admin actions logged separately:
    - Who did what, when
    - Before/after values (for edits)
    - IP address
    - Browser/device info
  - Cannot be deleted (immutable)
  - Search and filter
  - Export for compliance
  - Detailed view per action

**FSD-ADMIN-010: Change Log**
- System must log all data changes:
  - For critical tables (users, payments, investments):
    - Record old value, new value
    - Who changed, when
    - Reason (if provided)
  - Admin can view change history:
    - Select record (e.g., user)
    - "View Change History" button
    - Timeline showing all changes
    - Revert to previous value (if applicable)

### 18.4 System Health & Monitoring

**FSD-ADMIN-011: System Health Dashboard**
- Admin must see system health at a glance:
  - Overall health score (0-100)
  - Component status (traffic light: green/yellow/red):
    - Web server (online/offline)
    - Database (responsive/slow/down)
    - Cache (working/failing)
    - Queue (processing/stuck/failed)
    - Storage (space available)
    - Email service (working/failing)
    - SMS service (working/failing)
    - Payment gateway (working/failing)
  - Recent errors (last 10)
  - System uptime (%)
  - Alerts (if any component failing)

**FSD-ADMIN-012: Error Tracking**
- Admin must see application errors:
  - Error dashboard:
    - Total errors (today, week, month)
    - Error rate trend (chart)
    - Most common errors (table)
    - Recently occurred errors (feed)
  - Click error to see:
    - Error message, Stack trace
    - URL where occurred
    - User who experienced (if applicable)
    - Browser, OS, Device
    - Timestamp
    - Request data (GET/POST params)
  - Mark as resolved
  - Add notes to error
  - Integration with Sentry/Bugsnag (if configured)

**FSD-ADMIN-013: Queue Monitor**
- Admin must monitor queue jobs:
  - Queue dashboard:
    - Jobs pending (count)
    - Jobs processing (count)
    - Jobs failed (count)
    - Jobs completed today
    - Queue throughput (jobs/minute)
  - View pending jobs:
    - Job name, Payload (preview), Attempts, Next retry
  - View failed jobs:
    - Job name, Error message, Failed at
    - Retry button (retry manually)
    - Delete button
  - Clear all failed jobs button
  - Pause/resume queue processing

**FSD-ADMIN-014: Performance Profiler**
- Admin must see slow endpoints:
  - Performance dashboard:
    - Slowest pages/APIs (table)
    - URL, Avg response time, 95th percentile, Count
    - Click to see detailed breakdown:
      - Time spent in: Controller, Database, Cache, External APIs
      - Query list (with execution time)
      - Memory usage
  - Set performance budget:
    - Alert if response time > X seconds
  - Enable/disable profiling (overhead on production)

### 18.5 Developer Tools (Advanced)

**FSD-ADMIN-015: Database Query Tool**
- Advanced admin must be able to run SQL queries:
  - "Database" section in admin
  - SQL editor with syntax highlighting
  - "Run Query" button
  - Results shown in table
  - Export results (CSV/Excel)
  - Query history (last 20 queries)
  - Warning: "Advanced users only. Backup before modifying data."
  - Read-only mode option (disallow UPDATE/DELETE)

**FSD-ADMIN-016: API Testing Tool**
- Admin must be able to test internal APIs:
  - "API Tester" section
  - Select endpoint (dropdown: all available APIs)
  - Select method (GET, POST, PUT, DELETE)
  - Add parameters (form or JSON)
  - Add headers
  - "Send Request" button
  - Response shown:
    - Status code
    - Headers
    - Body (JSON formatted)
    - Response time
  - Save test cases for reuse

**FSD-ADMIN-018: Feature Flags**
- Admin must be able to toggle features:
  - "Feature Flags" section
  - List of all features:
    - Feature name, Description, Status (Enabled/Disabled)
  - Toggle switch for each feature
  - Examples:
    - New homepage design
    - Beta calculator
    - Advanced portfolio view
  - Enable for specific users only (beta testing):
    - Select users (multi-select)
    - Feature enabled only for them
  - Schedule feature enable/disable:
    - Enable on date X at time Y
    - Disable on date Z

---

## 19. CRITICAL BUSINESS FUNCTIONS

### 19.1 User Account Functions

**FSD-USER-101: User must be able to register a new account**
- Input: Username, Email, Mobile, Password, Referral code (optional)
- Process: Validation → Create account → Send OTP
- Output: Account created, pending verification

**FSD-USER-102: User must be able to verify email via OTP**
- Input: 6-digit OTP
- Process: Match OTP → Mark email verified
- Output: Email verified

**FSD-USER-103: User must be able to verify mobile via OTP**
- Input: 6-digit OTP
- Process: Match OTP → Mark mobile verified → Activate account
- Output: Account activated

**FSD-USER-104: User must be able to login with email/username/mobile**
- Input: Login credential + Password
- Process: Find user → Verify password → Generate token
- Output: JWT token, redirect to dashboard

**FSD-USER-105: User must be able to reset forgotten password via email link**
- Process: Enter email → Receive reset link → Click link → Enter new password
- Output: Password changed, can login

**FSD-USER-106: User must be able to change password (when logged in)**
- Input: Current password, New password
- Process: Verify current → Update to new
- Output: Password changed

**FSD-USER-107: User must be able to logout**
- Process: Revoke token → Clear session
- Output: Logged out, redirect to homepage

**FSD-USER-108: User must be able to view and edit profile**
- Editable fields: Name, DOB, Gender, Address, Photo
- Output: Profile updated

**FSD-USER-109: User must be able to enable/disable 2FA**
- Process: Enable → Setup method (SMS/Email) → Verify code → Active
- Output: 2FA enabled/disabled

### 19.2 KYC Functions

**FSD-KYC-101: User must be able to upload KYC documents**
- Input: Aadhaar (front, back), PAN, Demat certificate, Bank proof
- Process: Upload → Store securely → Mark as submitted
- Output: KYC submitted for review

**FSD-KYC-102: System must auto-verify Aadhaar via DigiLocker**
- Process: Call API → Extract data → Compare with user input
- Output: Aadhaar verified/failed

**FSD-KYC-103: System must auto-verify PAN via Income Tax API**
- Process: Call API → Verify validity → Check name match
- Output: PAN verified/failed

**FSD-KYC-104: System must auto-verify bank account via penny drop**
- Process: Send ₹1 → Verify account active → Check name match
- Output: Bank verified/failed

**FSD-KYC-105: Admin must be able to manually approve/reject KYC**
- Process: View documents → Complete checklist → Approve or Reject with reason
- Output: KYC status updated, user notified

**FSD-KYC-106: User must be able to resubmit rejected KYC documents**
- Process: Upload corrected documents → Back to review queue
- Output: KYC resubmitted

### 19.3 Plan & Subscription Functions

**FSD-PLAN-101: User must be able to view all available plans**
- Output: List of plans with details (amount, bonuses, features)

**FSD-PLAN-102: User must be able to compare plans side-by-side**
- Output: Comparison table with all plan features

**FSD-PLAN-103: User must be able to calculate returns for each plan**
- Input: Plan, Referrals (optional), Market gain %
- Output: Projected returns with breakdown

**FSD-PLAN-104: User must be able to subscribe to a plan**
- Pre-check: KYC verified
- Process: Select plan → Create subscription → First payment due
- Output: Subscription created, confirmation sent

**FSD-PLAN-105: User must be able to change (upgrade/downgrade) plan**
- Process: Select new plan → Calculate adjustment → Confirm
- Output: Plan changed, new payment schedule

**FSD-PLAN-106: User must be able to pause subscription temporarily**
- Input: Pause duration (1-3 months)
- Process: Stop payments → Extend end date
- Output: Subscription paused

**FSD-PLAN-107: User must be able to cancel subscription**
- Process: Request cancellation → Confirm → Stop future payments
- Output: Subscription cancelled, portfolio retained

### 19.4 Payment Functions

**FSD-PAY-101: User must be able to make monthly SIP payment**
- Input: Payment method (UPI, Card, Net Banking)
- Process: Create order → Open gateway → Process payment
- Output: Payment successful, allocation done

**FSD-PAY-102: User must be able to setup auto-debit mandate**
- Process: Authorize mandate → Register with gateway
- Output: Auto-debit active

**FSD-PAY-103: System must auto-charge user on due date (if auto-debit enabled)**
- Process: Cron job → Attempt charge → Process if successful
- Output: Payment processed automatically

**FSD-PAY-104: System must retry failed payments automatically**
- Process: Wait 24 hours → Retry (max 2 times)
- Output: Retry attempted

**FSD-PAY-105: User must receive payment confirmation via email/SMS**
- Output: Confirmation sent immediately after payment

**FSD-PAY-106: Admin must be able to manually record offline payment**
- Input: User, Amount, Reference, Proof
- Process: Create payment record → Process as regular payment
- Output: Payment recorded, allocations made

**FSD-PAY-107: Admin must be able to refund payment**
- Input: Payment ID, Refund amount, Reason
- Process: Call gateway refund API → Update status
- Output: Amount refunded to user

### 19.5 Bonus Functions

**FSD-BONUS-101: System must automatically calculate and credit progressive bonus after each payment**
- Formula: (month - 3) × progressive_rate × multiplier × base_amount
- Process: Calculate → Create transaction → Allocate shares
- Output: Bonus credited

**FSD-BONUS-102: System must automatically credit milestone bonus at 12, 24, 36 months**
- Pre-check: Consecutive payments requirement met
- Process: Calculate → Create transaction → Allocate shares
- Output: Milestone bonus credited

**FSD-BONUS-103: System must automatically credit consistency bonus for on-time payments**
- Process: Check if on-time → Credit bonus amount
- Output: Consistency bonus credited

**FSD-BONUS-104: System must automatically update referral multiplier when user completes referrals**
- Process: Count active referrals → Determine tier → Update multiplier
- Output: Multiplier updated, applies to future bonuses

**FSD-BONUS-105: System must automatically credit referral bonus when referred user invests**
- Process: Check referral completion → Credit ₹500 to referrer
- Output: Referral bonus credited

**FSD-BONUS-106: System must calculate and distribute quarterly profit share**
- Process: Calculate net profit → Distribute based on plan % and investment
- Output: Profit share credited to all eligible users

**FSD-BONUS-107: System must automatically credit celebration bonuses on birthday/anniversary**
- Process: Cron job checks dates → Credit bonus if match
- Output: Celebration bonus credited, greeting sent

**FSD-BONUS-108: Admin must be able to manually award bonus to any user**
- Input: User, Amount, Type, Reason
- Process: Create transaction → Allocate if needed
- Output: Manual bonus credited

**FSD-BONUS-109: User must be able to view all bonuses earned with breakdown**
- Output: Table of all bonuses with type, amount, date

### 19.6 Portfolio Functions

**FSD-PORT-101: System must automatically allocate pre-IPO shares after payment**
- Process: Calculate allocation → Select products → Create investment records
- Output: Shares allocated within 24 hours

**FSD-PORT-102: User must be able to view complete portfolio**
- Output: Holdings table with product, units, value, gain/loss

**FSD-PORT-103: User must be able to view portfolio performance over time**
- Output: Chart showing portfolio growth

**FSD-PORT-104: User must be able to view detailed product information**
- Output: Product details, company info, financials, risks

**FSD-PORT-105: Admin must be able to update current market price for listed products**
- Input: Product ID, New price
- Process: Update price → Recalculate all user portfolios
- Output: Price updated, portfolio values refreshed

**FSD-PORT-106: User must be able to sell shares after IPO listing**
- Input: Product, Units to sell
- Process: Calculate proceeds → Deduct exit fee (1%) → Credit wallet
- Output: Shares sold, funds in wallet

### 19.7 Wallet Functions

**FSD-WALLET-101: User must be able to add money to wallet**
- Input: Amount, Payment method
- Process: Initiate payment → On success, credit wallet
- Output: Wallet balance increased

**FSD-WALLET-102: User must be able to view wallet balance (available + locked)**
- Output: Balance display with breakdown

**FSD-WALLET-103: User must be able to view transaction history**
- Output: Table of all transactions (deposits, withdrawals, bonuses, etc.)

**FSD-WALLET-104: System must create transaction record for every wallet change**
- Process: Create immutable transaction → Update balance
- Output: Transaction logged

**FSD-WALLET-105: System must maintain accurate balance using transactions (not direct updates)**
- Rule: Balance = SUM(transactions)
- Output: Accurate balance always

### 19.8 Withdrawal Functions

**FSD-WITHDRAW-101: User must be able to request withdrawal**
- Input: Amount, Bank account
- Process: Check balance → Lock amount → Create request → Notify admin
- Output: Withdrawal requested

**FSD-WITHDRAW-102: Admin must be able to approve withdrawal**
- Process: Verify details → Approve → Initiate bank transfer
- Output: Withdrawal approved

**FSD-WITHDRAW-103: Admin must be able to reject withdrawal**
- Input: Rejection reason
- Process: Reject → Unlock balance → Notify user
- Output: Withdrawal rejected

**FSD-WITHDRAW-104: Admin must be able to mark withdrawal as completed**
- Input: UTR number
- Process: Update status → Deduct from wallet → Create transaction
- Output: Withdrawal completed

**FSD-WITHDRAW-105: System must auto-approve small withdrawals (if configured)**
- Pre-check: Amount <= threshold, User trusted
- Process: Auto-approve → Process via API
- Output: Withdrawal auto-processed

### 19.9 Referral Functions

**FSD-REF-101: System must generate unique referral code for each user at registration**
- Format: USERNAME + 4 random digits
- Output: Referral code created

**FSD-REF-102: User must be able to share referral link/code**
- Output: Referral link, Social share buttons, QR code

**FSD-REF-103: System must track referrals when new user signs up with code**
- Process: Record referrer → Create referral record (status=pending)
- Output: Referral tracked

**FSD-REF-104: System must complete referral when referred user makes first investment**
- Process: Update status=completed → Award ₹500 bonus → Recalculate multiplier
- Output: Referral completed

**FSD-REF-105: User must be able to view all referrals and their status**
- Output: Referral list with name, status, date, bonus earned

**FSD-REF-106: User must be able to view current multiplier and progress to next tier**
- Output: Current multiplier, Referrals needed for next tier, Progress bar

### 19.10 Lucky Draw Functions

**FSD-DRAW-101: System must automatically create monthly lucky draw**
- Process: Cron job on 1st of month → Create draw with prize structure
- Output: Draw created, status=open

**FSD-DRAW-102: System must generate entries when user makes on-time payment**
- Process: Check payment on-time → Generate X entries based on plan
- Output: Entries created with unique codes

**FSD-DRAW-103: User must be able to view current draw and their entries**
- Output: Draw details, Your entries count, Entry codes, Prize structure

**FSD-DRAW-104: Admin must be able to execute draw manually**
- Process: Select winners randomly → Mark entries → Create bonus transactions
- Output: Winners selected, prizes credited

**FSD-DRAW-105: System must auto-execute draw at month-end (if configured)**
- Process: Cron job at 11:59 PM last day → Execute draw
- Output: Draw executed automatically

**FSD-DRAW-106: System must notify all winners**
- Process: Send email/SMS to each winner
- Output: Winners notified

**FSD-DRAW-107: User must be able to view past draw results**
- Output: List of past draws with winners

### 19.11 Support Functions

**FSD-SUPPORT-101: User must be able to create support ticket**
- Input: Subject, Category, Priority, Message, Attachments
- Process: Create ticket → Assign to team → Notify admin
- Output: Ticket created

**FSD-SUPPORT-102: User must be able to reply to ticket**
- Input: Message, Attachments
- Process: Add message → Update status → Notify admin
- Output: Reply added

**FSD-SUPPORT-103: Admin must be able to view all tickets**
- Filters: Status, Category, Priority, Date range
- Output: Ticket list

**FSD-SUPPORT-104: Admin must be able to reply to ticket**
- Input: Message, Attachments
- Process: Add message → Update status → Notify user
- Output: Reply sent

**FSD-SUPPORT-105: Admin must be able to close ticket**
- Input: Resolution note
- Process: Update status=resolved → Request rating
- Output: Ticket closed

**FSD-SUPPORT-106: User must be able to rate support (1-5 stars)**
- Input: Rating, Feedback (optional)
- Process: Store rating
- Output: Rating recorded

**FSD-SUPPORT-107: User must be able to initiate live chat**
- Process: Open chat widget → Connect to available agent
- Output: Chat started

**FSD-SUPPORT-108: Chat must be converted to ticket if unresolved**
- Process: Create ticket from transcript
- Output: Ticket created

### 19.12 Reporting Functions

**FSD-REPORT-101: Admin must be able to generate any report with date filters**
- Input: Report type, Date range, Filters
- Process: Query data → Format report
- Output: Report generated

**FSD-REPORT-102: Admin must be able to export any report to PDF/Excel**
- Process: Generate report → Convert to format
- Output: File download

**FSD-REPORT-103: Admin must be able to schedule automatic report generation**
- Input: Report, Frequency, Recipients
- Process: Cron job generates → Emails to recipients
- Output: Report scheduled

**FSD-REPORT-104: User must be able to download investment statement**
- Output: PDF with all investments, bonuses, current value

**FSD-REPORT-105: User must be able to download tax statement**
- Output: PDF with capital gains calculation for tax filing

---

## 20. SUMMARY OF CONFIGURABILITY

**EVERYTHING can be configured from admin panel without code changes:**

✅ **Enable/Disable ANY module** (Registration, Investment, Withdrawal, etc.)
✅ **Create unlimited plans** with custom bonuses, features, pricing
✅ **Modify ANY plan attribute** (percentages, amounts, rules)
✅ **Add/edit/delete unlimited products** with full details
✅ **Configure ALL bonus types** (formulas, tiers, multipliers)
✅ **Customize ALL frontend content** (text, images, sections)
✅ **Edit ALL emails/SMS templates** with variables
✅ **Manage complete menu** (header, footer, mobile)
✅ **Configure ALL colors and fonts** (complete design system)
✅ **Upload/change logos** (main, favicon, email, PDF)
✅ **Edit ALL SEO meta tags** per page
✅ **Create custom pages** with drag-drop builder
✅ **Configure ALL payment gateways** with settings
✅ **Manage ALL withdrawal settings** (fees, limits, auto-approval)
✅ **Configure ALL notification templates** and delivery rules
✅ **Set ALL system settings** (timezone, currency, formats)
✅ **Manage user roles and permissions** completely
✅ **Create custom reports** with filters
✅ **Configure ALL compliance policies** (terms, privacy, refund)
✅ **Manage API integrations** (analytics, payment, communication)
✅ **Set ALL security settings** (password policy, 2FA, IP whitelist)

**NO hardcoded values. EVERYTHING database-driven.**

---

## END OF FUNCTIONAL SPECIFICATION DOCUMENT

**Total Functions Specified:** 300+

This FSD provides complete specifications for a **fully configurable** PreIPO SIP platform where administrators can control every aspect without touching code.

**Next Steps for Development:**
1. Database schema creation (55+ tables)
2. Admin panel development (all configuration interfaces)
3. Frontend website development (using configured content)
4. User dashboard development
5. Integration with payment gateways, SMS, email services
6. Testing (unit, integration, UAT)
7. Deployment and launch

**Document Version:** 1.0  
**Date:** November 6, 2024  
**Status:** Complete and Ready for Development
